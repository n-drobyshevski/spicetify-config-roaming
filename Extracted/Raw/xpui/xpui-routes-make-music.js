"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[5786],{12918:(e,t,a)=>{a.d(t,{w:()=>f});var r=a(67294),l=a(65598),n=a.n(l),s=a(32667),c=a(15235),i=a(99027),o=a(67892);const m="playlist-playlist-playlistDescription",u="playlist-playlist-heading",d="playlist-playlist-list",h="playlist-playlist-listItem",p="playlist-playlist-paragraph",f=r.memo((function({html:e,onTimeStampClick:t,enableTimestamps:a=!1}){const l=(0,r.useMemo)((()=>{const r=a?(0,c.f)(e):e;let l;try{l=n()(r,{transform:g(t),dangerouslySetChildren:[]})}catch{l=e}return l}),[a,e,t]);return r.createElement("div",{className:m},l)}));function g(e){let t=0;return{p:e=>r.createElement(s.D,{as:"p",variant:"ballad",semanticColor:"textSubdued",className:p},e.children),a:t=>t.href?.startsWith("#t=")?r.createElement(i.E,{onClick:e},t.children):t.href?r.createElement(o.r,{to:t.href},t.children):r.createElement(r.Fragment,null,t.children),ul:e=>r.createElement("ul",{className:d},e.children),ol:e=>r.createElement("ol",{className:d},e.children),li:e=>r.createElement(s.D,{as:"li",variant:"ballad",semanticColor:"textSubdued",className:h},e.children),br:()=>r.createElement("br",null),h1:e=>r.createElement(s.D,{as:"h1",variant:"balladBold",semanticColor:"textSubdued",className:u},e.children),h2:e=>r.createElement(s.D,{as:"h2",variant:"balladBold",semanticColor:"textSubdued",className:u},e.children),h3:e=>r.createElement(s.D,{as:"h3",variant:"balladBold",semanticColor:"textSubdued",className:u},e.children),h4:e=>r.createElement(s.D,{as:"h4",variant:"balladBold",semanticColor:"textSubdued",className:u},e.children),h5:e=>r.createElement(s.D,{as:"h5",variant:"balladBold",semanticColor:"textSubdued",className:u},e.children),h6:e=>r.createElement(s.D,{as:"h6",variant:"balladBold",semanticColor:"textSubdued",className:u},e.children),time:t=>r.createElement(i.E,{onClick:e},t.children),_:(e,a,l)=>{const n=void 0===a?e:l;return r.createElement(r.Fragment,{key:"fragment"+t++},n)}}}},95562:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var r=a(67294),l=a(6158),n=a(86706),s=a(69518),c=a.n(s),i=a(32667),o=a(12918);const m="nV_0UjulnuGnBYzXiFRd",u="F2fw42rcgQCHUh82jc3U",d=()=>{const e=(0,n.v9)((e=>e.session.user?.uri)),t=`View your unpublished and published songs on your <a href="${c().from(e).toURLPath(!0)}">profile page</a>`;return r.createElement("div",{className:m},r.createElement(i.D,{variant:"forte",semanticColor:"textBase",dir:"auto"},"Make music"),r.createElement(i.D,{variant:"ballad",semanticColor:"textBase",dir:"auto"},r.createElement(o.w,{html:t,onTimeStampClick:()=>{}})))};var h=a(53027),p=a(51615),f=a(67448);var g=a(11643);var b=a(36590),E=a(8498),k=a(19480),y=a(29988);const v=({templates:e,title:t,onClick:a})=>r.createElement(k.P,{title:t,className:u},e.map(((e,t)=>r.createElement(b.C,{key:`template-${t}`,index:t,onClick:()=>a(e.key),headerText:e.title,featureIdentifier:"make_music",uri:e.originalTrackUri,delegateNavigation:!0,renderCardImage:()=>r.createElement(E.x,{images:[{url:e.imageUri}]}),renderSubHeaderContent:()=>r.createElement(y.NB,{source:"Choose your style, vocal effects and intruments."})})))),C=r.memo((()=>{const{templates:e}=function(){const[e,t]=(0,r.useState)(null),a=(0,f.z)(),l=(0,r.useCallback)((async()=>{const e=await a.getTemplates({query:"",page_number:0,result_per_page:6,sort_by:""});t(e.projects)}),[a]);return(0,r.useEffect)((()=>{l()}),[l]),{templates:e}}(),{playlists:t}=(0,g.u)(),{forkAndNavigate:a,error:n,loading:s}=function(){const e=(0,p.k6)(),[t,a]=(0,r.useState)(null),[l,n]=(0,r.useState)(!1),s=(0,f.z)();return{forkAndNavigate:(0,r.useCallback)((async t=>{n(!0);try{const{project:a}=await s.forkProject({projectKey:t});e.push(`/make-music/studio/${a.originalTrackUri}/${a.soundtrapProjectId}`)}catch(e){a("Could not navigate to project, forking failed")}n(!1)}),[e,a,s]),error:t,loading:l}}();if(!e||n||s||!t)return r.createElement(l.h,{hasError:!!n,errorMessage:n??"Failed to load templates from Soundtrap"});const c=e.reduce(((e,t)=>(e[t.genre]??=[],e[t.genre].push(t),e)),{});return r.createElement("div",{className:"contentSpacing",id:"makeMusicPage"},r.createElement(d,null),Object.entries(c).map((([e,t])=>r.createElement(v,{key:`template-shelf-${e}`,templates:t,title:`Create a ${e} cover`,onClick:a}))),r.createElement(h.W,{playlists:t,title:"Hear what others are creating"}))}))},53027:(e,t,a)=>{a.d(t,{W:()=>s});var r=a(67294),l=a(46309),n=a(19480);const s=({playlists:e,title:t,showAll:a=!1})=>r.createElement(n.P,{total:e.length,title:t,seeAllUri:"/make-music/playlists",showSeeAll:!0,showAll:a},e.map(((e,t)=>r.createElement(l.Z,{key:e.playlistUri,uri:e.playlistUri,name:e.title,images:[{url:e.imageUri}],description:e.description,authorName:e.author,index:t}))))},11643:(e,t,a)=>{a.d(t,{u:()=>n});var r=a(67294),l=a(67448);const n=()=>{const[e,t]=(0,r.useState)(null),a=(0,r.useRef)(!1),n=(0,l.z)(),s=(0,r.useCallback)((async()=>{const e=await n.getPlaylists({query:"",page_number:0,result_per_page:6,sort_by:""});a.current&&t(e.playlists)}),[n]);return(0,r.useEffect)((()=>(a.current=!0,s(),()=>{a.current=!1})),[s]),{playlists:e,fetchPlaylists:s}}},15235:(e,t,a)=>{a.d(t,{f:()=>l});const r=/(\((?:[0-9]{1,3}:){1,2}[0-9]{2}\))/g;function l(e){return e.split(r).map((e=>{if(e.match(r)){return`(<time>${e.replace("(","").replace(")","")}</time>)`}return e})).join("")}}}]);
//# sourceMappingURL=xpui-routes-make-music.js.map