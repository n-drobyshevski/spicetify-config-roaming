"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[7553],{8294:(e,t,a)=>{a.d(t,{p:()=>p});var l=a(67294),r=a(96206),o=a(1838),n=a(61728),i=a(22423),s=a(28248),c=a(78462),u=a(42922),m=a(45342),d=a(54444),g=a(49961),f=a(39412);const y=new Set(c.P0),E=new Set([]),p=l.memo((function({nrTracks:e,collectionUri:t,columns:a,uri:p,sortable:k=!0,scrollToUri:b,usePlayContextItem:h,outerDomRef:D,spec:C}){const S=(0,l.useContext)(m.H),F=(0,l.useRef)(null),[P,w]=(0,l.useState)(e),{filter:v}=(0,l.useContext)(i.fo),T=(0,l.useRef)((()=>{})),[I,R]=(0,l.useState)([]),{sortState:A,setSortState:_}=(0,l.useContext)(c.Gb),x=(0,d.$P)(),L=(0,l.useCallback)(((e,t)=>{e===s.QD.ADDED_AT?_({column:s.QD.ADDED_AT,order:A.order===s.kn.ASC?s.kn.DESC:s.kn.ASC}):_((0,o.VK)(e,A)),C&&x.logInteraction(C.columnHeaderFactory({identifier:e,position:t||0}).hitSort())}),[x,_,A,C]);(0,l.useEffect)((()=>{F.current&&F.current.update()}),[A,v]),(0,l.useEffect)((()=>{F.current&&""===v&&F.current.scrollToFirstSelected()}),[v,P]),(0,l.useEffect)((()=>{w(e)}),[e]),(0,l.useEffect)((()=>{F.current&&b&&F.current.scrollToItem({uri:b})}),[b]);const U=(0,l.useCallback)((e=>{const t=e.map((e=>e.uri));T.current(),S?.remove(...t)}),[S]),B=(0,l.useCallback)(((e,t)=>{T.current=t,e.length>1?R(e):U(e)}),[U]),M=(0,l.useCallback)((async(e,t)=>{const a=await(S?.getTracks({offset:e,limit:t,uri:p,sort:(0,f.w)(A),filter:v})),l=a?.totalLength,r=a?.items||[];return"number"==typeof l&&l!==P&&w(l),r}),[v,S,P,A,p]),O=(0,l.useCallback)(((e,a)=>{const r=(0,g.X)(e.album?.images,{desiredSize:40,desiredLabel:"small"});return l.createElement(s.dx,{key:a+e.uri,index:a,contextUri:t,uri:e.uri,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,albumOrShow:e.album,isExplicit:e.isExplicit,isCollaborative:!1,isMixedMedia:!1,isPaywalled:!1,isUserSubscribed:!1,isLocal:e.isLocal,addedBy:[],dateAdded:e.addedAt,hasDecoratedAddedBy:!1,release_date:"",isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:r?.url||"",onMove:()=>{},onInsert:()=>{},usePlayContextItem:h,allowedDropTypes:[],isDisliked:!1})}),[t,h]);return l.createElement(l.Fragment,null,l.createElement(u.ZP,{value:"liked-songs-tracklist"},l.createElement(s.Pv,{ariaLabel:r.ag.get("sidebar.liked_songs"),key:t,hasHeaderRow:!0,columns:a,sortableColumns:S?.getCapabilities().canSort&&k?y:E,sortState:A,onSort:L,renderRow:O,resolveUri:e=>e.uri,resolveUid:e=>e.uri,onRemove:B,nrTracks:P,fetchTracks:M,limit:50,canFetchAllTracks:S?.getCapabilities().canFetchAllTracks,outerRef:F,outerDomRef:D})),l.createElement(n.h,{title:r.ag.get("remove_from_your_liked_songs"),isOpen:I.length>0,tracks:I,onClose:e=>{e.stopPropagation(),R([])},onRemove:U}))}))},95521:(e,t,a)=>{a.r(t),a.d(t,{default:()=>$});var l=a(67294),r=a(86706),o=a(51615),n=a(98983),i=a(93994),s=a(96206),c=a(18270),u=a(43683),m=a(70369),d=a(30731),g=a(6158),f=a(55120),y=a(77834),E=a(22423),p=a(28248),k=a(78462),b=a(61412),h=a(69846),D=a(23232),C=a(4236),S=a(61901),F=a(51441),P=a(88247),w=a(45342),v=a(69010),T=a(84242),I=a(54444),R=a(29255),A=a(12498),_=a(25916),x=a(39412),L=a(98816),U=a(98562),B=a(35213);const M=l.memo((({tracklistDomRef:e})=>{const{spec:t,logger:a}=(0,I.fU)(L.createDesktopSearchBarEventFactory,{}),r=(0,l.useCallback)((()=>{a.logInteraction(t.filterFieldFactory().keyStrokeFilter())}),[a,t]),o=(0,l.useCallback)((()=>{a.logInteraction(t.filterFieldFactory().hitClearFilter())}),[a,t]),n=(0,l.useCallback)((()=>{a.logInteraction(t.sortButtonFactory().hitSort())}),[a,t]);return l.createElement("div",{className:y.Z.searchBoxContainer},l.createElement(l.Suspense,{fallback:null},l.createElement(U.K,{placeholder:s.ag.get("playlist.search_in_playlist"),clearOnEscapeInElementRef:e,onFilter:r,onClear:o})),l.createElement(B.l,{columns:k.P0,onSort:n}))}));var O=a(8294);const Q=l.lazy((()=>Promise.all([a.e(1814),a.e(2716),a.e(682)]).then(a.bind(a,82716)))),z=[p.QD.INDEX,p.QD.TITLE,p.QD.ALBUM,p.QD.ADDED_AT,p.QD.DURATION],N="your_library",H=({metadata:e,canFilter:t,canSort:a})=>{const{uri:r,name:h,totalLength:w}=e,R=(0,l.useRef)(null),_=(0,C.k)()&&w>0,L=w>0,U=(0,S.Y5)("#5038a0"),{filter:B}=(0,l.useContext)(E.fo),{sortState:Q,setSortState:H}=(0,l.useContext)(k.Gb),{spec:$,logger:q}=(0,I.fU)(i.createDesktopLikedSongsEventFactory,{data:{uri:r}}),G=l.useMemo((()=>$.headerFactory()),[$]),Z=l.useMemo((()=>$.tracklistFactory()),[$]);(0,l.useEffect)((()=>{null===Q.column&&H({column:p.QD.ADDED_AT,order:p.kn.DESC})}),[Q,H]);const K=(0,o.k6)(),X="POP"!==K.action?new URLSearchParams(K.location.search).get("uri"):null,{isPlaying:V,togglePlay:Y,usePlayContextItem:j,isActive:J}=(0,T.n)((0,P.I)(r,(0,x.w)(Q),B),{featureIdentifier:N,referrerIdentifier:"your_library"}),W=()=>{const e=$.actionBarFactory().playButtonFactory();J?V?q.logInteraction(e.hitPause({itemToBePaused:r})):q.logInteraction(e.hitResume({itemToBeResumed:r})):q.logInteraction(e.hitPlay({itemToBePlayed:r})),Y()},ee=(0,l.useCallback)(((e,t)=>{const a=$.actionBarFactory().downloadButtonFactory();t===v.mc.download?q.logInteraction(a.hitDownload({itemToDownload:r})):t===v.mc.clear?q.logInteraction(a.hitRemoveDownload({itemToRemoveFromDownloads:r})):t===v.mc.notAllowed&&q.logInteraction(a.hitUiReveal())}),[q,$,r]);return l.createElement("section",{role:"presentation",className:y.Z.playlist,"data-testid":"playlist-page"},l.createElement(m.$,null,s.ag.get("playlist.page-title",h)),l.createElement(D.s,{metadata:e,isPlaying:V,togglePlay:W,backgroundColor:U,specLikedSongs:G}),l.createElement(c.o,{backgroundColor:U},l.createElement(c.F,null,L?l.createElement(f.$,{onClick:W,isPlaying:V,size:F.qE.lg,uri:r,ariaPauseLabel:s.ag.get("playlist.a11y.pause",h),ariaPlayLabel:s.ag.get("playlist.a11y.play",h)}):null,e.totalLength>0&&l.createElement(A.v,{uri:r,renderEnabled:()=>l.createElement(b.v,{uri:r})}),l.createElement(u.o,{uri:r,canDownload:_,isFollowing:!0,onFollow:()=>{},size:u.q.md,onClick:ee}),t&&a&&l.createElement(I.Nh,{spec:$.actionBarFactory()},l.createElement(M,{tracklistDomRef:R})))),l.createElement("div",{className:"contentSpacing"},w>0?l.createElement(l.Suspense,{fallback:l.createElement(g.h,{hasError:!1,errorMessage:s.ag.get("error.request-collection-tracks-failure")})},l.createElement(I.Nh,{spec:Z},l.createElement(O.p,{nrTracks:w,columns:z,collectionUri:r,scrollToUri:X,usePlayContextItem:j,outerDomRef:R,spec:Z}))):l.createElement(d.u,{message:s.ag.get("collection.empty-page.songs-subtitle"),title:s.ag.get("collection.empty-page.songs-title"),linkTo:"/search",linkTitle:s.ag.get("collection.empty-page.songs-cta"),renderInline:!0},l.createElement(n.F,null))))},$=l.memo((function(){const e=(0,_.b)(),t=(0,l.useContext)(w.H).getCapabilities(),a=(0,r.v9)(R.n5),{isEnhanced:o}=(0,h.U)(`spotify:user:${a}:collection`);if(e){const a=l.createElement(k.kz,{uri:e.uri},l.createElement(E.hz,{uri:e.uri},l.createElement(H,{metadata:e,canFilter:t.canFilter&&e.totalLength>0,canSort:t.canSort&&e.totalLength>0})));return l.createElement(A.v,{uri:e.uri,renderEnabled:()=>o?l.createElement(l.Suspense,{fallback:null},l.createElement(k.kz,{uri:e.uri},l.createElement(Q,{metadata:{...e,collaborators:{count:1,items:[{isOwner:!0,user:e.owner,tracksAdded:e.totalLength}]}},capabilities:t,featureIdentifier:N}))):a,renderDisabled:()=>a})}return l.createElement(g.h,{hasError:!1,errorMessage:s.ag.get("error.not_found.title.playlist"),loadOffline:t.canModifyOffline})}))},23232:(e,t,a)=>{a.d(t,{s:()=>l.s});var l=a(40786)}}]);
//# sourceMappingURL=xpui-routes-collection-songs.js.map