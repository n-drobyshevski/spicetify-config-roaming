"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[5713],{1850:(e,t,a)=>{a.d(t,{e:()=>m});var n=a(67294),r=a(94184),o=a.n(r),l=a(96206);const i="artist-followButton-button",c="artist-followButton-followed",s="artist-followButton-disabled",m=n.memo((function({isFollowing:e,onClick:t,disabled:a=!1,buttonText:r}){const m=e?l.ag.get("following"):l.ag.get("follow");return n.createElement("button",{type:"button",className:o()(i,{[c]:e,[s]:a}),onClick:t},r||m)}))},76119:(e,t,a)=>{a.d(t,{A:()=>f});var n=a(67294),r=a(94184),o=a.n(r),l=a(32667),i=a(34142),c=a(47921),s=a(20246),m=a(71379),u=a(78267),d=a(30005),g=a(36652),E=a(21691),p=a(28248);const y=({heading:e,selected:t,onSelect:a,options:r,sortOrder:o})=>{let i;return o&&(o===p.kn.ASC||o===p.kn.SECONDARY_ASC?i=n.createElement(m.C,{iconSize:16}):o!==p.kn.DESC&&o!==p.kn.SECONDARY_DESC||(i=n.createElement(u.B,{iconSize:16}))),n.createElement(d.v,null,e?n.createElement(g.F,null,e):null,r.map((({key:e,value:r})=>n.createElement(E.s,{role:"menuitemradio","aria-checked":e===t.key&&!i,key:e,onClick:()=>a(e),icon:e===t.key&&i},n.createElement(l.D,{variant:"mesto"},r)))))},k="x-sortBox-sortDropdown",h="CbHJjxYxldG7uUPMYMaP";const f=({heading:e,options:t,selected:a,onSelect:r,isSelectionChanged:m,sortOrder:u,variant:d="mesto",semanticColor:g,disabled:E,onClick:p})=>{const[f]=t;a||(a=f);const b=m?m(a):a!==f;return n.createElement(s.y,{menu:n.createElement(y,{selected:a,options:t,onSelect:r,sortOrder:u,heading:e})},((e,t,r)=>n.createElement("button",{className:o()(k,{[h]:b}),onClick:e=>{E||(p?.(e),t(e))},ref:r,type:"button"},n.createElement(l.D,{semanticColor:g,variant:d},a.value),e?n.createElement(i.U,{iconSize:16}):n.createElement(c.i,{iconSize:16}))))}},47917:(e,t,a)=>{a.d(t,{V:()=>R,e:()=>A});var n=a(67294),r=a(86706),o=a(69518),l=a.n(o),i=a(33702),c=a(84629),s=a(43914),m=a(25988),u=a(91753),d=a(88435),g=a(63567),E=a(56294),p=a(57784),y=a(56802),k=a(38894),h=a(80219),f=a(18261),b=a(87257),v=a(57978),C=a(42922),P=a(18864),S=a(52759),w=a(54444),N=a(7073),I=a(84788);function A(e){return{uri:e.uri,name:e.name,trailer:e.trailer,showTypes:e.showTypes}}const x=e=>`activation-trigger-mme-${e}`,R=n.memo((function({index:e=-1,showMetadata:t,episode:a,usePlayContextItem:o,status:R,variant:D}){const U=(0,r.oR)().getState().platform?.isBrowser,F=a.playedState.playPositionMilliseconds,B=a.uri,O=(0,n.useRef)(null),[M,T]=(0,n.useState)(a.playedState.state===N.sY.Completed),L=(0,p.O1)(),z=(0,k.g)(),_=(0,P.jh)(),W=(0,y.o)(),G=(0,r.I0)(),{UBIFragment:H,spec:X,logger:q}=(0,w.fU)(i.createDesktopEpisodeBlockEventFactory,{data:{uri:B,reason:a.requestId||"",position:e}}),K=(0,w.Wi)(X),{isActive:Y,isPlaying:j,togglePlay:V}=o({uri:B}),[Z]=(0,S.z)(1e4,(e=>e?.item?.uri===B));(0,n.useEffect)((()=>{j&&(O.current=Z)}),[j,Z]),(0,n.useEffect)((()=>{!j&&O.current&&a.duration.milliseconds<=O.current&&T(!0)}),[j,a.duration.milliseconds]);const Q=(0,n.useCallback)((e=>{e||(O.current=0),T(e)}),[]),$=A(t),J=(0,h.s)({...a,coverArt:{sources:a.coverArt}},$),ee=(0,n.useCallback)((()=>{if(a.episodeType===N.Wf.Episode&&U)g.y.set((()=>({triggerId:x(a.uri),triggerAction:null})));else if(z)J();else{let e;e=j?X.playButtonFactory().hitPause({itemToBePaused:B}):Y?X.playButtonFactory().hitResume({itemToBeResumed:B}):X.playButtonFactory().hitPlay({itemToBePlayed:B});const t=q.logInteraction(e);W({targetUri:B,intent:j?"pause":"play",type:"click"}),V({loggingParams:t})}}),[Y,J,W,V,B,j,z,a,U,q,X]),te=(0,n.useCallback)((()=>{q.logInteraction(X.hitUiNavigate({destination:B})),W({type:"click",targetUri:B,intent:"navigate"})}),[B,W,q,X]),ae=a.podcastSubscription?.isPaywalled??!1,ne=a.podcastSubscription?.isUserSubscribed??!1,re=ae&&!ne,oe=ae&&z,{badges:le}=(0,I.r)({contentRating:a.contentRating?.label,isPaywalled:ae}),ie=(0,n.useCallback)((()=>G((0,c.RM)(t.uri))),[t.uri,G]),ce=(0,n.useCallback)((e=>{let r=e;return(re||oe)&&(r=n.createElement(d.l,{enabled:!0,showUri:t.uri},r)),!a.playability.playable&&le.nineteen&&(r=n.createElement("div",{onClick:e=>{e.stopPropagation(),ie()}},e)),r=n.createElement(s.D,{id:x(B),targetURI:l().from(B)},r),r}),[B,re,oe,t.uri,le.nineteen,a.playability.playable,ie]);return n.createElement(H,{spec:X},n.createElement(C.ZP,{value:"row",index:e},n.createElement(f._,{onShow:()=>{q.logInteraction(X.secondaryHitUiReveal())},menu:n.createElement(m.k,{uri:B,showUri:t.uri,sharingInfo:a.sharingInfo,isPlayed:M,onMarkAsPlayed:Q})},n.createElement(u.X,{ref:K,requestId:a.requestId,index:e,uri:B,size:_,images:a.coverArt||[],name:a.name,showName:t.name,description:a.description,isPlayable:a.playability.playable||re,fullyPlayed:M,durationMs:a.duration.milliseconds,releaseDate:a.releaseDate?.isoString||"",resumePositionMs:O.current??F,handleDragStart:e=>{if(e.target!==e.currentTarget)return;const n=`${a.name} â€¢ ${t.name}`;L(e,[B],n,t.uri)},handlePlaybackClick:ee,handleClick:te,isCurrentlyPlaying:Y,isPaywalled:ae,isUserSubscribed:ne,isPlaying:j,position:j?Z:void 0,episodeSharingInfo:a.sharingInfo,onMarkAsPlayed:Q,contentInformation:a.contentInformation,badges:n.createElement(n.Fragment,null,le.explicit&&n.createElement(b.N,null),le.paid&&n.createElement(E.g,null),le.nineteen&&n.createElement(v.X,{size:16})),playButtonWrapper:ce,onMoreButtonClick:()=>{q.logInteraction(X.moreButtonFactory().hitUiReveal())},status:R,variant:D}))))}))},7992:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Ta});var n=a(67294),r=a(51615),o=a(69518),l=a.n(o),i=a(87577),c=a(35090),s=a(73305),m=a(96206),u=a(70369),d=a(6158),g=a(45878),E=a(32667),p=a(86604),y=a(56802),k=a(25678),h=a(49961),f=a(84465);const b="GPPWAsVio35hH080drEK",v="f8FyVnjsXfG9VtTzk9Df",C="tpOdce3HYBF6ASz4MXdr",P="p9AillvR7MCZkOrv3U3h",S="zMqHdOQtjEEbcMV7YHe9",w="zPJ5qeQhpgUvKpAAlNpA",N="n3G4Y43jgF6wXOuj0X44",I=n.memo((function({coverArt:e,showAccessInfo:t,isOpen:a,toggleModal:o,backgroundColor:l}){const i=(0,r.k6)(),c=(0,y.o)();if((0,n.useEffect)((()=>{c({type:"view",intent:"audiobook-gated-entry-point"})}),[c]),!t||!t.partnerLink)return null;const{partnerLink:{title:s,body:m,soaPartners:u}}=t,d=(0,h.X)(e,{desiredSize:640}),g={"--bg-color":l};return n.createElement(f.Z,{contentLabel:"activation-modal",isOpen:a,onRequestClose:o},n.createElement("div",{className:b,style:{...g}},n.createElement(k.Ee,{loading:"lazy",src:d?.url,className:v}),n.createElement("div",{className:C},n.createElement(E.D,{as:"p",variant:"canon",className:P},s),n.createElement(E.D,{as:"p",className:S},m),u&&u?.map((e=>n.createElement("a",{href:e.linkUrl,className:w,key:e.linkUrl,onClick:()=>{c({type:"click",intent:"navigate-to-access-provider",itemIdSuffix:e.displayName}),o(),i.replace("?isUnlockingAudiobook=true")}},n.createElement("img",{src:e.logoUrl||"",alt:"",width:"24px"}),n.createElement("span",{className:N},n.createElement(E.D,{variant:"ballad"},e.displayName," ")),n.createElement(p.V,{iconSize:16})))))))}));var A=a(48690),x=a(22345),R=a(62515),D=a(20246),U=a(85522),F=a(37761),B=a(7469),O=a(42781);const M="SpVoh9vvBN0kIwzfCiBh",T="nsGHaEmn310z9W4RMbb8",L="PfYVlZzroXSurDmS_kxY",z="kCT99_BcJQtW47mEfVF6",_="gmDgEbPyRXNixmjYAT9f",W="XlZGcb86bItwlMPQ2jOf",G="VGTtqfOlX2jIbpff6mPP",H="aexqooSgfdW95poEaxjH",X="Fui2wGupk4F1Khigbrhj",q="jWcvSz47NFpbLjnkFT1O",K="Oo6MP8F01W5uGlnw8dag";var Y=a(51441),j=a(94184),V=a.n(j),Z=a(33953),Q=a(87257),$=a(57978),J=a(16281),ee=a(84788),te=a(82627);let ae;!function(e){e.SMALL="small",e.LARGE="large"}(ae||(ae={}));const ne=({images:e,title:t,contentRating:a,duration:r,moreButton:o,onClick:l,onContextMenu:i,onTouchStart:c,onTouchEnd:s,isPlaying:m,isActive:u,size:d,className:g,label:p})=>{const y=d===ae.LARGE?"md":"sm",{badges:k}=(0,ee.r)({contentRating:a});return n.createElement("div",{"data-testid":"trailer-component",className:V()(M,g,{[T]:u}),onContextMenu:i,onTouchStart:c,onTouchEnd:s},n.createElement("div",{className:z},n.createElement("div",{className:H},n.createElement(F.O,{type:O.p.EPISODE,title:t,className:V()(G,{[K]:d===ae.SMALL,[q]:d===ae.LARGE}),size:B.m$.SIZE_56,images:e,shape:F.K.ROUNDED_CORNERS}),n.createElement("div",{className:X},n.createElement(te.fh,{"data-testid":"trailer-play-button",version:Y.ul.transparent,size:y,isPlaying:m,onClick:l}))),n.createElement("div",null,n.createElement("div",{className:_},n.createElement(E.D,{dir:"auto",className:L,variant:"balladBold"},t)),n.createElement("div",{className:W},n.createElement(J.V,{text:p}),k.explicit&&n.createElement(Q.N,null),k.nineteen&&n.createElement($.X,null),n.createElement(E.D,{dir:"auto",variant:"mesto"},n.createElement(Z.nL,{durationMs:r}))))),o)};var re=a(40080),oe=a(84242),le=a(27999),ie=a(54444),ce=a(39714),se=a(34011),me=a(42745);const ue="QEd1L2SSRW1ol_sQQN6m",de="ENuWK8u3C9kmadnqkErf",ge="i0gSVhns0PjhiUKm4OG1",Ee="jKVb6K0dga3SfW1dp2Pg",pe="MOpV0_YizQER2NksxLju",ye="vrR8bh9DvivyDfUrh1vD",ke="_toO3CqMPAPTbny7Rh8R",he="Iudw61HRePwOAJpbDRvA",fe="GWaz1n1SADn9enzKdi_Z",be=n.memo((function({coverArt:e,toggleModal:t,uri:a}){const r=(0,h.X)(e,{desiredSize:320}),{spec:o,logger:l}=(0,ie.fU)(me.createMobilePodcastRatingEventFactory,{data:{identifier:s.Wg.PODCAST_SHOW_AUDIOBOOK,uri:a}});return n.createElement(f.Z,{contentLabel:"podcast-rating-modal",isOpen:!0,onRequestClose:t},n.createElement("div",{className:ue},n.createElement("div",{className:ge},n.createElement(E.D,{as:"h1",variant:"canon",className:ke},"Rate audiobook"),n.createElement("button",{className:Ee,onClick:()=>{const e=o.pageFactory({identifier:a}).closeButtonFactory().hitUiNavigateBack();l.logInteraction(e),t()}},n.createElement(ce.k,{role:"presentation"}),n.createElement("span",{className:"hidden-visually"},"Close modal"))),n.createElement("div",{className:pe},n.createElement(k.Ee,{loading:"eager",src:r?.url,className:de}),n.createElement("div",{className:ye},n.createElement(E.D,{as:"p",variant:"cello",className:he},"Want to rate this audiobook?"),n.createElement(E.D,{as:"p",className:fe},"Head over to the Spotify app to rate this and other titles."),n.createElement(se.D,{colorSet:"invertedLight",onClick:()=>{const e=o.pageFactory({identifier:a}).okButtonFactory().hitUiNavigateBack();l.logInteraction(e),t()}},"Ok")))))}));var ve=a(97656),Ce=a(67892);const Pe="Pc8AKn4KmzHwEw8lPiSb",Se=({htmlDescription:e,narrators:t,spec:a})=>{const r=(0,y.o)(),o=(0,ie.$P)(),l=(0,n.useCallback)((e=>{r({intent:"expand-description",type:"click"});const t=a.seeMoreButtonFactory();o.logInteraction(e?t.hitUiReveal():t.hitUiHide())}),[o,r,a]);return n.createElement(n.Fragment,null,t.length?n.createElement(E.D,{as:"p",variant:"ballad",className:Pe},m.ag.get("web-player.audiobooks.narratedByX",t.join(m.ag.getSeparator()))):null,e&&n.createElement(ve.o,{maxLines:4,content:e,htmlContent:e,LinkComponent:Ce.Z,onExpanded:l}))};var we=a(18270),Ne=a(4383),Ie=a(43683);const Ae=n.memo((function({uri:e,size:t=Ie.q.md,className:a,onClick:r}){const[o,l]=(0,Ne.Z)(e),i=(0,y.o)(),c=(0,n.useCallback)((()=>{i({targetUri:e,intent:o?"unsave":"save",type:"click"}),l(!o)}),[i,e,o,l]);return n.createElement(Ie.o,{className:a,isFollowing:o,onFollow:c,onClick:r,uri:e,size:t})}));var xe=a(28137);const Re="fh0UJnx_1gVzGAmFaePG",De="bUYG1AgkIOioFe_UYEO7",Ue="CtQWnvRuRmBLt50eOSQL";var Fe=a(55120),Be=a(9983),Oe=a(51867);function Me({uri:e,price:t,size:a,isPlaying:r,locked:o,onClick:l}){const i=(0,Oe.k)();return o?n.createElement(se.D,{onClick:async()=>{try{if(!t?.finalPrice)throw new Error("Locked book has no price");await(0,Be.Q)({show_uri:e,currency:t.finalPrice.currency,price:t.finalPrice.amount})}catch(e){i(m.ag.get("error.generic"))}}},0===t?.finalPrice?.amount?m.ag.get("web-player.audiobooks.buyFree"):m.ag.get("web-player.audiobooks.buy")):n.createElement(Fe.$,{onClick:l,isPlaying:r,size:a,uri:e})}var Te=a(44065),Le=a(32626),ze=a(69010),_e=a(98778),We=a(4236);const Ge=n.memo((({price:e})=>0===e.finalPrice?.amount&&0===e.finalListPrice?.amount?n.createElement("div",{className:De},n.createElement(E.D,{variant:"ballad",semanticColor:"textBase"},m.ag.get("audiobook.freePriceDescription"))):n.createElement("div",{className:De},n.createElement(E.D,{variant:"celloCanon",semanticColor:"textBase"},e.finalPrice?.formattedPrice),n.createElement(E.D,{variant:"mesto",semanticColor:"textSubdued",style:{textDecoration:"line-through"}},e.finalListPrice?.formattedPrice)))),He=n.memo((({children:e})=>n.createElement("div",{className:Re},e))),Xe=n.memo((function({backgroundColor:e,uri:t,name:a,isPlaying:r,isExplicit:o,togglePlay:l,isLocked:i,duration:c,publishDate:s,price:u,spec:d}){const[g,p]=(0,Ne.Z)(t),k=!(0,We.k)(),h=i&&u,f=(0,y.o)(),b=(0,ie.$P)(),v=(0,n.useCallback)((()=>{f({targetUri:t,intent:g?"unsave":"save",type:"click"});const e=d.saveToLibraryButtonFactory();g?b.logInteraction(e.hitUnfollow({itemToBeUnfollowed:t})):b.logInteraction(e.hitFollow({itemToBeFollowed:t})),p(!g)}),[f,t,g,d,p,b]),C=(0,n.useCallback)(((e,a)=>{const n=d.downloadButtonFactory();a===ze.mc.download?b.logInteraction(n.hitDownload({itemToDownload:t})):a===ze.mc.clear?b.logInteraction(n.hitRemoveDownload({itemToRemoveFromDownloads:t})):a===ze.mc.notAllowed&&b.logInteraction(n.hitUiReveal())}),[b,d,t]),P=(0,n.useCallback)((()=>{const e=d.contextButtonFactory().hitUiReveal();b.logInteraction(e)}),[b,d]);return n.createElement(we.o,{backgroundColor:e},h&&n.createElement(Ge,{price:u}),n.createElement(He,null,o&&n.createElement(Q.N,null),n.createElement("div",null,s&&n.createElement(E.D,{variant:"mesto",className:Ue},m.ag.formatDate(s)),n.createElement(E.D,{variant:"mesto"},n.createElement(Z.nL,{durationMs:c})))),n.createElement(we.F,null,n.createElement(Me,{onClick:()=>l(),isPlaying:r,size:Y.qE.lg,uri:t,locked:i,price:u}),n.createElement(_e.r,{key:"follow-button"},n.createElement(Te.H,{isAdded:g,onClick:v,disabled:k,size:Te.q.md,isAudiobook:!0})),i&&n.createElement(Ae,{uri:t,onClick:C}),n.createElement(Le.yj,{menu:n.createElement(xe.X,{uri:t})},n.createElement(A.z,{label:m.ag.get("more.label.context",a),onClick:P}))))}));var qe=a(60289),Ke=a(59482),Ye=a(72907);const je=n.memo((function({coverArt:e,name:t,authorName:a,uri:r,backgroundColor:o,isPlaying:l,togglePlay:i,isLocked:c,price:s}){return n.createElement(qe.gF,{backgroundColor:o},n.createElement(Ke.W,null,n.createElement(Me,{size:Y.qE.sm,onClick:()=>i(),isPlaying:l,uri:r,locked:c,price:s}),n.createElement(Ye.i,{text:t,dragUri:r,dragLabel:t})),n.createElement(Le._P,{menu:n.createElement(xe.X,{uri:r})},n.createElement(qe.Oz,{images:e,name:t,shape:F.K.ROUNDED_CORNERS})),n.createElement(qe.sP,null,n.createElement(qe.dy,{small:!0,uppercase:!0},m.ag.get("web-player.audiobooks.audiobook")),n.createElement(qe.xd,{canEdit:!1,onClick:()=>{}},t),n.createElement(qe.QS,{author:a})))}));var Ve=a(57480),Ze=a(94008);const Qe="_yl4tOZxcpoUt28k6B8I",$e="lcJflizNrSwDM9yPNk6h",Je="ret7iHkCxcJvsZU14oPY",et=({rating:e,className:t,onClick:a})=>{const r=e?.rating?.rating?Ve.u:Ze.G;if(!e)return null;const o=e.averageRating?.showAverage?n.createElement(E.D,{variant:"mesto",className:V()(Je)},"(",m.ag.formatNumberCompact(Number(e.averageRating.totalRatings)),")"):null;return n.createElement("button",{className:V()(Qe,t),onClick:a},n.createElement(E.D,{dir:"auto",variant:"mestoBold"},e?.averageRating?.showAverage&&e.averageRating?.average?e.averageRating?.average:e?.rating?.rating?e.rating.rating:m.ag.get("web-player.audiobooks.noRating")),n.createElement(r,{iconSize:16,className:V()($e)}),o)},tt=({rating:e,onClick:t})=>n.createElement(et,{rating:e,onClick:t});var at=a(70937),nt=a(192);var rt=a(86649),ot=a(60410),lt=a(56294),it=a(26010),ct=a(8341),st=a(5944),mt=a(13759),ut=a(31610);const dt="BO8KtKFwgSHtMt6PAmuv",gt="b0Vng72SrQiFroJKXfk2",Et="eWxDd0LanTnTlSl8SOHX",pt="eAOkseqV13_CAmzuDJpa",yt="fovofKIYdEIURgIYoKm2",kt="we_1b4qCQBaFPT12eUXp",ht="NXXFrQO7npgPCRuSKaAA",ft="ekkhhuxKVGAzkEmuh9kE",bt="zd6xqobF255bxHFtCmXy",vt=n.memo((function({name:e,duration:t,uri:a,bookUri:o,bookName:i,usePlayContextItem:c,isLocked:s,isPlayable:u,resumePositionMs:d,isFullyPlayed:g,toggleActivationModal:p,isExplicit:k,is19PlusOnly:h,spec:f,index:b}){const v=(0,r.k6)(),C=l().from(a).toURLPath(!0),[P,S]=(0,n.useState)(g),w=(0,n.useRef)(d),{isPlaying:N,togglePlay:I,isActive:R}=c({uri:a}),D=(0,ie.$P)(),U=(0,ct.Y)((e=>{if(e?.item?.uri===a){const t=(0,st.k)(e)??0;return w.current=t,t}return 0})),{useDownloading:F}=(0,n.useContext)(it.I),{currentAvailability:B}=F(a),O=[ze.V8.YES,ze.V8.DOWNLOADING,ze.V8.WAITING].includes(B),M=(0,n.useCallback)((e=>{e.stopPropagation(),e.preventDefault()}),[]),T=(0,n.useCallback)((e=>{if(M(e),C){const e=f.chapterBlockFactory({position:b,uri:a}).hitUiNavigate({destination:a});D.logInteraction(e),v.push(C)}}),[M,C,f,b,a,D,v]),L=(0,y.o)(),z=(0,n.useCallback)((e=>{M(e);const t=f.chapterBlockFactory({position:b,uri:a}).playButtonFactory();s?(L({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-chapter"}),D.logInteraction(t.hitShowPaywall({paywalledItem:a})),p()):(R?N?D.logInteraction(t.hitPause({itemToBePaused:a})):D.logInteraction(t.hitResume({itemToBeResumed:a})):D.logInteraction(t.hitPlay({itemToBePlayed:a})),I())}),[b,R,s,N,D,L,f,M,p,I,a]),_=(0,n.useCallback)((e=>{e||(w.current=0),S(e)}),[]),W=(0,n.useCallback)(((e,t)=>{M(e);const n=f.chapterBlockFactory({position:b,uri:a}).downloadButtonFactory();t===ze.mc.download?D.logInteraction(n.hitDownload({itemToDownload:a})):t===ze.mc.clear?D.logInteraction(n.hitRemoveDownload({itemToRemoveFromDownloads:a})):t===ze.mc.notAllowed&&D.logInteraction(n.hitUiReveal())}),[b,D,f,M,a]),G=(0,n.useCallback)((()=>{const e=f.chapterBlockFactory({position:b,uri:a}).secondaryHitUiReveal();D.logInteraction(e)}),[b,D,f,a]),H=(0,n.useCallback)((e=>{M(e);const t=f.chapterBlockFactory({position:b,uri:a}).contextMenuFactory().hitUiReveal();D.logInteraction(t)}),[b,D,f,M,a]);return n.createElement(Le._P,{menu:n.createElement(x.r,{uri:a,showUri:o,isPlayed:P,onMarkAsPlayed:_}),onShow:G},n.createElement("div",{className:pt},n.createElement(Ce.r,{to:a,onClick:T,className:dt,tabIndex:-1},n.createElement("hr",{className:Et,"aria-hidden":!0}),n.createElement("div",{className:gt},n.createElement(E.D,{as:"h2",variant:"balladBold",className:ht,semanticColor:"textBase"},e),n.createElement("div",{className:ft},n.createElement(te.fh,{size:"sm",version:te.ul.secondary,onClick:z,isPlaying:N,ariaPlayLabel:m.ag.get("tracklist.a11y.play",e,i),ariaPauseLabel:m.ag.get("tracklist.a11y.pause",e,i),locked:s,disabled:!u&&!s}),s?n.createElement(lt.g,null):null,k&&n.createElement(Q.N,null),h&&n.createElement($.X,{size:16}),n.createElement("div",{className:bt},n.createElement(mt.E,{isPlaying:N,fullyPlayed:P,durationMs:t.milliseconds,resumePositionMs:w.current,position:N?U:void 0}))),n.createElement(Le.yj,{menu:n.createElement(x.r,{uri:a,showUri:o,isPlayed:P,onMarkAsPlayed:_})},n.createElement(A.z,{className:yt,size:ut.q.sm,label:m.ag.get("more.label.context",e),onClick:H})),n.createElement(ut.o,{uri:a,bookUri:o,className:V()({[kt]:!O}),onClick:W,size:ut.q.sm})))))})),Ct=({bookUri:e,bookName:t,isFinishedUnlockingJourney:a,usePlayContextItem:r,toggleModal:o,spec:l})=>{const i=function(e,t){const a=(0,nt.z)();return(0,n.useCallback)((async(n,r)=>a.getBookContents(e,{offset:n,limit:r,doRefreshSubscription:t})),[t,a,e])}(e,a),c=(0,n.useRef)(!1),s=(0,n.useRef)(0),[m,u]=(0,n.useState)([]),d=(0,n.useCallback)((()=>{i&&(c.current||null===s.current||(c.current=!0,i(s.current,50).then((e=>{c.current=!1,s.current=e.nextOffset,e.items.length>0&&u((t=>t.concat(e.items)))}))))}),[i]);return(0,n.useEffect)((()=>{s.current=0,u([])}),[e]),n.createElement("ul",null,n.createElement(at.C,{onReachBottom:d,triggerOnInitialLoad:!0},m.map(((a,i)=>{const{name:c,duration:s,uri:m,playability:{playable:u},playedState:{playPositionMilliseconds:d,state:g},isExplicit:E,is19PlusOnly:p}=a;return n.createElement(vt,{name:c,duration:s,uri:m,bookUri:e,bookName:t,key:m,usePlayContextItem:r,isLocked:(0,ot.S)(a),isPlayable:u,resumePositionMs:d,isFullyPlayed:g===rt.sY.Completed,toggleActivationModal:o,isExplicit:E,is19PlusOnly:p,spec:l,index:i})}))))},Pt="mmCZ5VczybT9VqKB5wFU",St="At_ihDspJfh1yw3Cn2cq",wt="Yqz1Nv6wj1n3HmXL_qji",Nt="qRqn3JrWLPbGW9k2a63n",It="HAah1_lK_dHgyyE71I8Z",At="eiC4nh70nb5UHZBYMgNA",xt=n.memo((function({metadata:e}){const{uri:t,coverArt:a,name:o,htmlDescriptionPlain:l,authorName:i,sample:c,narrators:d,rating:E,isExplicit:p,duration:k,copyrights:h,publishDate:f,price:b,isLocked:v}=e,{search:C}=(0,r.TH)(),P=!!new URLSearchParams(C).get("isUnlockingAudiobook"),S=!(!(0,re.D)(P)||P),w=(0,R.Z)(a[0]?.url),[N,F]=(0,n.useState)(!1),[B,O]=(0,n.useState)(!1),M=(0,y.o)(),{spec:T,logger:L}=(0,ie.fU)(g.createDesktopAudiobookEventFactory,{data:{uri:t,identifier:s.Wg.PODCAST_SHOW_AUDIOBOOK}}),z=(0,n.useMemo)((()=>T.actionBarFactory()),[T]),_=(0,n.useMemo)((()=>T.aboutSectionFactory()),[T]),W=(0,n.useMemo)((()=>T.chapterListFactory()),[T]);(0,n.useEffect)((()=>{M({type:"view",intent:"audiobook"})}),[M]);const G=(0,n.useCallback)((()=>{N||M({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-header"}),F(!N)}),[M,N]),H=(0,le.ye)(t),{togglePlay:X,isPlaying:q,usePlayContextItem:K,isActive:Y}=(0,oe.n)({uri:t},{featureIdentifier:"audiobook"}),j=(0,n.useCallback)((async()=>{const e=T.actionBarFactory().playButtonFactory();v?L.logInteraction(e.hitShowPaywall({paywalledItem:t})):(Y?q?L.logInteraction(e.hitPause({itemToBePaused:t})):L.logInteraction(e.hitResume({itemToBeResumed:t})):L.logInteraction(e.hitPlay({itemToBePlayed:t})),X())}),[Y,v,q,L,T,X,t]),{isActive:V,isPlaying:Z,togglePlay:Q}=K({uri:c?.uri||""}),$=(0,n.useCallback)((()=>{c?.uri&&(M({targetUri:c.uri,intent:Z?"play":"pause",type:"click"}),Q())}),[Z,M,Q,c?.uri]),J=(0,n.useCallback)((()=>{const e=_.ratingButtonFactory().hitUiReveal();L.logInteraction(e),O((e=>!e))}),[_,L]);return n.createElement("section",{className:Pt},n.createElement(u.$,null,m.ag.get("show.page-title",o)),n.createElement(je,{name:o,authorName:i,uri:t,coverArt:a,backgroundColor:w,togglePlay:X,isPlaying:q,isLocked:v,price:b}),n.createElement(Xe,{name:o,backgroundColor:w,uri:t,togglePlay:j,isPlaying:q,isLocked:v,isExplicit:p,duration:k,publishDate:f,price:b,spec:z}),n.createElement("div",{className:St},n.createElement("div",{className:wt},n.createElement(Se,{htmlDescription:l,narrators:d,spec:_})),n.createElement("div",{className:Nt},c&&n.createElement(ne,{label:m.ag.get("sample"),images:c.coverArt||[],title:c.name,duration:c.duration.milliseconds,moreButton:n.createElement(D.y,{menu:n.createElement(x.r,{uri:c.uri,showUri:t})},n.createElement(A.z,null)),onClick:$,isPlaying:Z,isActive:V,size:ae.LARGE,contentRating:c.contentRating?.label}),n.createElement("div",{className:It},n.createElement(tt,{rating:E,onClick:J}))),n.createElement("div",{className:At},n.createElement(Ct,{bookUri:t,bookName:o,isFinishedUnlockingJourney:S,usePlayContextItem:K,toggleModal:G,spec:W}),n.createElement(U.k,{copyrights:h}))),N&&H&&n.createElement(I,{backgroundColor:w,isOpen:N,toggleModal:G,coverArt:a,showAccessInfo:H}),B&&n.createElement(be,{toggleModal:()=>O(!1),coverArt:a,uri:t}))}));var Rt=a(74414),Dt=a(11486),Ut=a(49207),Ft=a(49125),Bt=a(87834),Ot=a(26382);const Mt={field:Ot.ay.PUBLISH_DATE,order:Ot.i5.DESC},Tt={field:Ot.ay.PUBLISH_DATE,order:Ot.i5.ASC},Lt={episodic:Mt,sequential:Tt,recent:Mt};function zt(){return new Map([[Mt,{key:"newest-to-oldest",value:m.ag.get("shows.sort.newest-to-oldest")}],[Tt,{key:"oldest-to-newest",value:m.ag.get("shows.sort.oldest-to-newest")}]])}function _t(e){return Lt[e]}var Wt=a(86514),Gt=a(1850);const Ht=({uri:e,name:t,backgroundColor:a,spec:r})=>{const o=(0,ie.$P)(),l=(0,y.o)(),i=!(0,We.k)(),[c,s]=(0,Ne.Z)(e),u=(0,n.useCallback)((()=>{l({targetUri:e,intent:c?"unsave":"save",type:"click"});const t=r.followButtonFactory();o.logInteraction(c?t.hitUnfollow({itemToBeUnfollowed:e}):t.hitFollow({itemToBeFollowed:e})),s(!c)}),[l,e,c,r,o,s]),d=(0,n.useCallback)((()=>{o.logInteraction(r.contextButtonFactory().hitUiReveal())}),[o,r]);return n.createElement(we.o,{backgroundColor:a},n.createElement(we.F,null,n.createElement(_e.r,{key:"follow-button"},n.createElement(Gt.e,{isFollowing:c,onClick:u,disabled:i})),n.createElement(D.y,{menu:n.createElement(Wt.M,{uri:e}),onShow:d},n.createElement(A.z,{label:m.ag.get("more.label.context",t)}))))},Xt=(0,n.lazy)((()=>a.e(8381).then(a.bind(a,18381))));function qt(e){return(0,i.W6)(Ut.$f)?n.createElement(n.Suspense,{fallback:!0},n.createElement(Xt,e)):null}var Kt=a(25988);const Yt="nLNTsyonBwoRIzAv1AME",jt="E4I5I7G2CfW32hLWZaqE",Vt=({title:e,uri:t,className:a,onClick:r,position:o})=>{const l=(0,n.useCallback)((e=>{r?.(e,{uri:t,position:o})}),[r,o,t]);return n.createElement(Ce.r,{"aria-label":e,className:V()(jt,a),to:t,onClick:l},n.createElement(E.D,{dir:"auto",variant:"mestoBold"},e))};function Zt(e){return!!e.uri&&!!e.title}const Qt=({topics:e,className:t,onClick:a})=>n.createElement("div",{className:V()(Yt,t)},e.filter(Zt).map(((e,t)=>n.createElement(Vt,{key:e.uri,title:e.title,uri:e.uri,position:t,onClick:a}))));var $t=a(38894),Jt=a(80219),ea=a(18261),ta=a(18864),aa=a(89952),na=a(47917),ra=a(42922),oa=a(22583);const la=(0,n.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowFilterProvider")},sortState:[]}),ia=n.memo((function({uri:e,children:t}){return n.createElement(oa.r,{uri:e,defaultState:[],sortContext:la,localStorageKey:"showFilterParams-v2"},t)})),ca=(0,n.createContext)({setSortState:()=>{throw new Error("setSortState must be used within a ShowSortProvider")},sortState:_t("recent")}),sa=e=>{const t=zt();return Array.from(t.keys()).some((({field:t})=>t===e?.field))},ma=n.memo((function({uri:e,children:t,defaultSortParam:a}){return n.createElement(oa.r,{uri:e,defaultState:a,sortContext:ca,localStorageKey:"showSortParam",validator:sa},t)})),ua="cJJXVm4gQW6AdfCQRhpX",da="hTRqaN61SDG95erQGMmx",ga={totalCount:0,nextOffset:0,items:[]},Ea=n.memo((function({showMetadata:e,usePlayContextItem:t}){const{sortState:a}=(0,n.useContext)(ca),{sortState:r}=(0,n.useContext)(la),o=(0,le.ZM)(e.uri,a,r),[l,i]=(0,n.useState)(ga),c=(0,n.useRef)(!1),s=(0,n.useRef)(0),m=(0,n.useCallback)(((e=!1)=>{if(!o)return;const t=s.current;null!==t&&(c.current||(c.current=!0,o(t,50).then((a=>{i((n=>{const r=e?[]:[...n.items];return r.splice(t,a.items.length,...a.items),s.current=a.nextOffset,{...a,items:r}})),c.current=!1}))))}),[o]);return(0,n.useEffect)((()=>{i(ga)}),[e.uri]),(0,n.useEffect)((()=>{s.current=0,m(!0)}),[m]),n.createElement(ra.ZP,{value:"track-list"},n.createElement(at.C,{onReachBottom:m,triggerOnInitialLoad:!0},l.items.map(((a,r)=>n.createElement("div",{className:da,key:`${r}${a.uri}`},n.createElement("hr",{className:ua,"aria-hidden":!0}),n.createElement(na.V,{key:`${a.uri}/${r}`,index:r,episode:a,showMetadata:e,usePlayContextItem:t}))))))}));var pa=a(76119);const ya={field:Ot.YG.ISPLAYED,operator:Ot.NK.EQUALS,value:!1},ka={field:Ot.YG.STARTEDPLAYING,operator:Ot.NK.GREATER_THAN,value:0};const ha="all-episodes",fa=({onFilter:e})=>{const{sortState:t,setSortState:a}=(0,n.useContext)(la),r=new Map([[ya,{key:"is-played",value:m.ag.get("shows.filter.unplayed")}],[ka,{key:"started-playing",value:m.ag.get("shows.filter.in-progress")}]]),o=Array.from(r.values());o.unshift({key:ha,value:m.ag.get("mwp.podcast.all.episodes")});const l=Array.from(r.keys()),i=(0,n.useCallback)((t=>{if(t===ha)a([]);else{const e=l.find((e=>r.get(e)?.key===t));e&&a([e])}e()}),[e,a,l,r]);if(!r.size||!l)return null;let c=o[0];const s=Array.from(r.entries()).filter((e=>t?.some((t=>t.field===e[0].field&&t.operator===e[0].operator))));return s.length>0&&(c=s[0][1]),n.createElement(pa.A,{options:o,onSelect:e=>i(e),selected:c,variant:"balladBold",semanticColor:"textBase",heading:m.ag.get("drop_down.filter_by")})},ba=({onSort:e})=>{const{sortState:t,setSortState:a}=(0,n.useContext)(ca),r=zt(),o=Array.from(r.values()),l=Array.from(r.keys()),i=(0,n.useCallback)((t=>{const n=l.find((e=>r.get(e)?.key===t));n&&a(n),e()}),[l,e,r,a]);if(!r.size||!t)return null;const c=Array.from(r.keys()).find((e=>e.field===t.field&&e.order===t.order)),s=r.get(c);return n.createElement(pa.A,{options:o,onSelect:e=>i(e),selected:s,heading:m.ag.get("drop_down.sort_by")})},va="show-showPage-sectionWrapper",Ca="TYB4Y2xQujO7cifhHush",Pa="YJlizbhw6DBPHT9OYbdj",Sa="klz_XuZpllvTMzpJF1gw",wa="TfjbWiK8hca4HHEBnonP",Na="kR0M2WSYVUj4cohADSFM",Ia="ghfuv80I8uW_ymG_jfx9",Aa="jtfSxoRam9rzTtdXIjzc",xa="fejGrhq7pxGC99cUdyVw",Ra="T0OjvsNXAJJGd23eBG2m",Da=({spec:e})=>{const t=(0,ie.$P)(),{canSort:a,canFilter:r}=(0,le.zZ)().capabilities,o=(0,n.useCallback)((()=>{t.logInteraction(e.episodeListFactory().filterButtonFactory().hitFilter())}),[t,e]),l=(0,n.useCallback)((()=>{t.logInteraction(e.episodeListFactory().sortButtonFactory().hitSort())}),[t,e]);return n.createElement("div",{className:Na},r&&n.createElement("div",{className:Aa},n.createElement(fa,{onFilter:o})),!r&&n.createElement(E.D,{as:"h3",variant:"canon",semanticColor:"textBase",className:xa},m.ag.get("mwp.podcast.all.episodes")),a&&n.createElement("div",{className:Ia},n.createElement(ba,{onSort:l})))},Ua=e=>{switch(e){case rt.it.TRAILER:return m.ag.get("podcasts.next-episode.trailer");case rt.it.UP_NEXT:return m.ag.get("podcasts.next-episode.up-next");case rt.it.CONTINUE_LISTENING:return m.ag.get("podcasts.next-episode.continue-listening");case rt.it.FIRST_PUBLISHED:return m.ag.get("podcasts.next-episode.first-published");case rt.it.LATEST_PUBLISHED:return m.ag.get("podcasts.next-episode.latest-published");default:return}},Fa=({metadata:e,showId:t,spec:a})=>{const{uri:r,trailer:o,topics:l,description:c,htmlDescription:s}=e,u=(0,ie.$P)(),d=(0,n.useMemo)((()=>a.episodeListFactory()),[a]),g=(0,i.W6)(Ut.Vz),p=(0,y.o)(),k=(0,i.W6)(Ut.Cz),h=(0,$t.g)(),{sortState:f}=(0,n.useContext)(ca),{sortState:b}=(0,n.useContext)(la),v=(0,le.zZ)(),{usePlayContextItem:C}=(0,oe.n)({uri:r,metadata:{[aa.sb.SORTING_CRITERIA]:v.getPlayerSort(f),[aa.sb.FILTERING_PREDICATE]:v.getPlayerFilter(b)}},{featureIdentifier:"show"}),{isActive:P,isPlaying:S,togglePlay:w}=C({uri:o?.uri||""}),N=(0,n.useCallback)((e=>{p({intent:"expand-description",type:"click"});const t=a.aboutSectionFactory().seeMoreButtonFactory(),n=e?t.hitUiReveal():t.hitUiHide();u.logInteraction(n)}),[u,p,a]),I=(0,n.useCallback)(((e,t)=>{const n=a.aboutSectionFactory().topicFactory(t).hitUiNavigate({destination:t.uri});u.logInteraction(n)}),[u,a]),x=(0,na.e)(e),R=(0,Jt.s)(o,x),F=(0,n.useCallback)((()=>{o?.uri&&(h?R():(p({targetUri:o.uri,intent:S?"play":"pause",type:"click"}),w()))}),[R,h,S,p,w,o?.uri]),{ref:B,breakpoint:O}=(0,ta.Db)({[ta.Uo.MEDIUM]:0,[ta.Uo.LARGE]:600}),M=l.length>0,T=c||k&&s,L=T||M;return n.createElement("div",{className:Ca},n.createElement("div",{className:Pa},L&&n.createElement(n.Fragment,null,n.createElement(E.D,{as:"h3",variant:"canon",semanticColor:"textBase",className:xa},m.ag.get("artist.about")),T&&n.createElement(ve.o,{maxLines:4,content:(c||"").trim(),onExpanded:N,htmlContent:k&&s?s:void 0,LinkComponent:Ce.Z}),M&&n.createElement(Qt,{topics:l,onClick:I})),n.createElement(qt,{showId:t,uri:r}),o&&!g&&n.createElement(ea._,{menu:n.createElement(Kt.k,{uri:o.uri,showUri:r,sharingInfo:o.sharingInfo})},n.createElement(ne,{label:m.ag.get("track-trailer"),className:Ra,images:o.coverArt||[],title:o.name,duration:o.duration.milliseconds,moreButton:n.createElement(D.y,{menu:n.createElement(Kt.k,{uri:o.uri,sharingInfo:o.sharingInfo,showUri:r})},n.createElement(A.z,null)),onClick:F,isPlaying:S,isActive:P,size:ae.LARGE,contentRating:o.contentRating?.label}))),n.createElement(ta.ZU.Provider,{value:O},n.createElement("div",{className:wa,"data-testid":"show-all-episode-list",ref:B},g&&e.nextBestEpisode&&n.createElement(na.V,{showMetadata:e,episode:e.nextBestEpisode.data,usePlayContextItem:C,status:Ua(e.nextBestEpisode.type),variant:"next-best-episode"}),n.createElement(Da,{spec:a}),n.createElement(ie.Nh,{spec:d},n.createElement(Ea,{showMetadata:e,usePlayContextItem:C})))),n.createElement(U.k,{copyrights:[]}))};var Ba=a(6330);const Oa=({metadata:e,backgroundColor:t})=>{const{uri:a,coverArt:r,name:o,podcastType:l,publisherName:i}=e,{isXSOnly:c,isSMOnly:s}=(0,Ba.e)(),u=c||s;return n.createElement(qe.gF,{backgroundColor:t},n.createElement(Ke.W,null,n.createElement(Ye.i,{text:o,dragUri:a,dragLabel:o})),n.createElement("div",{className:Sa},n.createElement(ea._,{menu:n.createElement(Wt.M,{uri:a})},n.createElement(qe.Oe,{loading:"eager",name:o,images:r,placeholderType:"show",shape:qe.Kc.ROUNDED_CORNERS}))),n.createElement(qe.sP,null,n.createElement(qe.dy,{small:!0,uppercase:!0},"SHOW"===l?m.ag.get("type.show"):m.ag.get("type.podcast")),n.createElement(ea._,{menu:n.createElement(Wt.M,{uri:a})},n.createElement(qe.xd,{dragUri:a,dragLabel:o},n.createElement("span",{"data-testid":"show-title"},o))),n.createElement(qe.dy,{large:!u,medium:u,bold:!0},i)))},Ma=({metadata:e,showId:t})=>{const{coverArt:a,name:r,uri:o}=e,{spec:l}=(0,ie.fU)(c.createDesktopPodcastEventFactory,{data:{uri:o}}),i=(0,n.useMemo)((()=>l.actionBarFactory()),[l]),s=(0,R.Z)(a[0]?.url||null);return n.createElement("section",{className:va},n.createElement(u.$,null,m.ag.get("podcasts.show.seo.title",{name:r})),n.createElement(Oa,{metadata:e,backgroundColor:s}),n.createElement(Ht,{uri:o,name:r,backgroundColor:s,spec:i}),n.createElement(Fa,{metadata:e,showId:t,spec:l}))},Ta=n.memo((function(){const{showId:e}=(0,r.UO)(),t=`spotify:show:${e}`,a=(0,i.W6)(Ut.uB),o=(0,i.W6)(Ut.Nf),c=(0,Ft.l)(t,!0),u=(0,Dt.V)("show",c);if(!c||(0,rt.MP)(c)&&(!c.userCreated?.userUri||!o)||(0,rt.l6)(c)&&!a){const e=c&&(0,rt.l6)(c)?m.ag.get("error.not_found.title.audiobook"):m.ag.get("error.not_found.title.podcast");return n.createElement(d.h,{hasError:!1,errorMessage:e})}return(0,rt.l6)(c)?n.createElement(n.Suspense,{fallback:null},n.createElement(Bt.C,{pageId:s.Wg.PODCAST_SHOW_AUDIOBOOK,uri:t},n.createElement(xt,{metadata:c}))):(0,rt.MP)(c)&&o?n.createElement(Rt.o,{to:l().from(c.userCreated?.userUri).toURLPath(!0)}):u?n.createElement(Rt.o,{to:u}):n.createElement(n.Suspense,{fallback:null},n.createElement(Bt.C,{pageId:s.Wg.PODCAST,uri:t},n.createElement(ia,{uri:c.uri},n.createElement(ma,{uri:c.uri,defaultSortParam:_t(c.consumptionOrder)},n.createElement(Ma,{showId:e,metadata:c})))))}))},85522:(e,t,a)=>{a.d(t,{k:()=>l});var n=a(67294),r=a(32667);const o="rTMkDBDp47Eo12ZEQv4U",l=({copyrights:e,courtesyLine:t})=>{const a=(e||[]).map(((e,t)=>{const a=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(Â©\s+)/,"").replace(/^(â„—\s+)/,"");let o;return o="C"===e.type?"Â©":"P"===e.type?"â„—":`(${e.type})`,n.createElement(r.D,{as:"p",variant:"finale",key:t,dir:"auto"},`${o} ${a}`)}));return t&&a.unshift(n.createElement(r.D,{as:"p",variant:"finale",key:a.length,dir:"auto"},t)),n.createElement("div",{className:o},a)}}}]);
//# sourceMappingURL=xpui-routes-show.js.map