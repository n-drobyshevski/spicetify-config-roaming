"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[3472],{99922:(e,t,a)=>{a.d(t,{o:()=>l});var n=a(87577),i=a(49207);function l(){return{version:(0,n.W6)(i.GE)?2:1}}},40771:(e,t,a)=>{a.d(t,{Z:()=>r});var n=a(87462),i=a(67294),l=a(67892);const r=({href:e,children:t,...a})=>i.createElement(l.Z,(0,n.Z)({to:e},a),t)},43683:(e,t,a)=>{a.d(t,{q:()=>T,o:()=>x});var n=a(67294),i=a(94184),l=a.n(i),r=a(69518),o=a.n(r),s=a(59440),c=a(97081),d=a(96206),m=a(4236),u=a(83692),p=a(26010),g=a(69010),y=a(18597),E=a(75012),k=a(40080),b=a(14130);const v="x-downloadButton-cancelDownloadButton",f="x-downloadButton-DownloadButton",h="x-downloadButton-button",C="x-downloadButton-removeDownload",N="x-downloadButton-cancelDownload",P="x-downloadButton-progress",S="z3zia5snl987x676qe5w";let T;!function(e){e[e.sm=24]="sm",e[e.md=32]="md"}(T||(T={}));const I=e=>{const{currentTarget:t,detail:a}=e;a>0&&t&&t.blur()},x=({uri:e,isFollowing:t,canDownload:a,onFollow:i,size:r=T.sm,className:x,onClick:w=(()=>{})})=>{const D={"--size":`${r}px`},{useDownloading:U,useDownloadCapability:A}=(0,n.useContext)(p.I),[M,L]=(0,n.useState)(!1),[R,F]=A(o().isEpisode(e)),[O,B]=(0,n.useState)(!1),{currentAvailability:_,progress:W,beginDownload:z,clearDownload:K}=U(e);((e,t)=>{const a=(0,b.r)(),i=(0,n.useRef)(!1);(0,n.useEffect)((()=>{e===g.V8.DOWNLOADING&&!1===i.current&&(i.current=!0,a.say(d.ag.get("download.downloading",t.totalItems)))}),[a,e,t]);const l=(0,k.D)(e);(0,n.useEffect)((()=>{l===g.V8.DOWNLOADING&&e===g.V8.YES&&(i.current=!1,a.say(d.ag.get("download.complete")))}),[a,l,e])})(_,W);const Z=(0,n.useCallback)((e=>{F===g.v$.DOWNLOADING_NOT_ALLOWED?(B(!0),w(e,g.mc.notAllowed)):(!1===t?(i(),L(!0)):z(),w(e,g.mc.download)),I(e)}),[z,F,t,w,i]),V=(0,n.useCallback)((e=>{K(),I(e),w(e,g.mc.clear)}),[K,w]);(0,n.useEffect)((()=>{!0===M&&!0===t&&(z(),L(!1))}),[t,M,z]);const X=(0,m.k)(),$="boolean"==typeof a?a:X,H=_===g.V8.YES;return R===g.PQ.NO_DOWNLOAD_CAPABILITY?null:$||H?F===g.v$.DOWNLOADING_NOT_ALLOWED?n.createElement("div",{className:f},n.createElement(u.w,{label:d.ag.get("download.download")},n.createElement("button",{className:l()(h,x),role:"switch",onClick:Z,"aria-label":d.ag.get("download.download"),"aria-checked":!1},n.createElement(s.D,{iconSize:r}))),O&&n.createElement("div",{className:S},n.createElement(y.E,{withTopLeftPointer:!0,horizontal:!0,onClose:()=>{B(!1)}},d.ag.get("download.upsell")))):H?n.createElement(u.w,{label:d.ag.get("download.remove")},n.createElement("button",{className:l()(h,x,C),role:"switch",onClick:V,"aria-label":d.ag.get("download.remove"),"aria-checked":!0},n.createElement(c.E,{iconSize:r}))):_===g.V8.NO?n.createElement(u.w,{label:d.ag.get("download.download")},n.createElement("button",{className:l()(h,x),role:"switch",onClick:Z,"aria-label":d.ag.get("download.download"),"aria-checked":!1},n.createElement(s.D,{iconSize:r}))):n.createElement("div",{className:l()(N,x),role:"switch","aria-checked":!0},n.createElement(u.w,{label:d.ag.get("download.cancel")},n.createElement("button",{style:D,className:l()(h,v,x),onClick:V,"aria-label":d.ag.get("download.cancel")})),n.createElement("span",{style:D,className:l()(P,v)},n.createElement(E.e,{"aria-valuetext":d.ag.get("progress.downloading-tracks"),percentage:W.percentage,size:r}))):null}},37483:(e,t,a)=>{a.d(t,{p:()=>d,q:()=>s.q});var n=a(67294),i=a(86706),l=a(4383),r=a(67870),o=a(56802),s=a(43683);const c=n.memo((function({uri:e,size:t=s.q.md,className:a,onClick:c}){const[d,m]=(0,l.Z)(e),u=(0,i.I0)(),p=(0,o.o)(),g=(0,n.useCallback)((()=>{p({targetUri:e,intent:d?"remove-from-library":"add-to-library",type:"click"}),m(!d),u(d?(0,r.SS)():(0,r.kK)())}),[p,e,d,m,u]);return n.createElement(s.o,{className:a,isFollowing:d,onFollow:g,onClick:c,uri:e,size:t})})),d=n.memo((function(e){return n.createElement(c,e)}))},22578:(e,t,a)=>{a.d(t,{$:()=>u});var n=a(67294),i=a(64593),l=a(96206),r=a(69691),o=a(8341),s=a(89952),c=a(51615),d=a(24183);function m(e){return e.includes("Spotify")?e:`Spotify – ${e}`}const u=({children:e,usePlayingItem:t})=>{let a=m(e);(e=>{const{mainLandmarkRef:t}=(0,d.Oh)(),a=(0,c.k6)(),i=a.location?.state?.preventMoveFocus,l=(0,n.useRef)(a.length<2);l.current=a.length<2,(0,n.useEffect)((()=>{const a=t.current;!i&&!l.current&&a&&e&&(a.setAttribute("aria-label",e),a.focus())}),[e,t,i])})(e);const{isPlaying:u}=(0,r.IK)(),p=(0,o.Y)((e=>e?.item));return p&&(u||t)&&((0,s.G_)(p)?a=[p.name,p.artists.map((e=>e.name)).join(l.ag.getSeparator())].join(" • "):(0,s.iw)(p)?a=[p.name,p.show.name].join(" • "):(0,s.k6)(p)&&(a=m(l.ag.get("ad-formats.advertisement")))),n.createElement(i.q,{defaultTitle:"Spotify",defer:!1},n.createElement("title",null,a))}},69400:(e,t,a)=>{a.r(t),a.d(t,{default:()=>sa});var n=a(67294),i=a(86706),l=a(51615),r=a(69518),o=a.n(r),s=a(87577),c=a(97348),d=a(73305),m=a(96206),u=a(70369),p=a(63567),g=a(6158),y=a(74257),E=a(77995),k=a(84629),b=a(18270),v=a(48690),f=a(22345),h=a(60289),C=a(59482),N=a(72907),P=a(67892),S=a(43914),T=a(88435),I=a(82627);const x="activation-trigger-mme",w=({episodeUri:e,showUri:t,isLocked:a,isPlaying:l,isPlayDisabled:r,playButtonPlayLabel:s,playButtonPauseLabel:c,onClick:d})=>{const m=(0,i.v9)((e=>e.platform?.isBrowser)),u=n.createElement(T.l,{showUri:t,enabled:a,renderInline:!1},n.createElement(I.fh,{size:"lg",onClick:d,isPlaying:l,disabled:r,locked:a,ariaPlayLabel:s,ariaPauseLabel:c}));return m?n.createElement(S.D,{id:x,targetURI:o().from(e),fadeOut:!0},u):u};var D=a(62515),U=a(32626),A=a(18261),M=a(57978),L=a(69010),R=a(84242),F=a(8341),O=a(5944),B=a(54444),_=a(7073),W=a(13759),z=a(84788),K=a(60410),Z=a(40771),V=a(31610);const X="UVWRbDQd2DM0ShkvMq54",$="Eoy1M3AAKeAUI9cNWsuq",H="rmgkmccGmTBvrw7gXMyS",q="JKIiOrx9EhZCkyBsu7YI";const Y=n.memo((function({chapter:e}){const{name:t,uri:a,playedState:l,contentRating:r,duration:s,playability:c}=e,d=e.book,u=e.coverArt.length?e.coverArt:d.coverArt||[],p=u[0]?.url,g=(0,D.Z)(p||null),S=(0,i.I0)(),[T,I]=(0,n.useState)(l.state===_.sY.Completed),{spec:x,logger:Y}=(0,B.fU)(E.createDesktopAudiobookChapterEventFactory,{data:{uri:a}}),{triggerPlay:J,togglePlay:G,isPlaying:Q,isActive:j}=(0,R.n)({uri:a},{featureIdentifier:"episode"}),ee=(0,F.Y)((e=>(0,O.k)(e)??void 0)),te=(0,K.S)(e),{badges:ae}=(0,z.r)({contentRating:r?.label}),ne=(0,n.useCallback)((e=>{!c.playable&&ae.nineteen&&(e.stopPropagation(),S((0,k.RM)(a||"")))}),[a,c.playable,ae.nineteen,S]),ie=(0,n.useCallback)((e=>{const t=x.actionBarFactory().playButtonFactory();te?Y.logInteraction(t.hitShowPaywall({paywalledItem:a})):j?(Q?Y.logInteraction(t.hitPause({itemToBePaused:a})):Y.logInteraction(t.hitResume({itemToBeResumed:a})),G()):(Y.logInteraction(t.hitPlay({itemToBePlayed:a})),J({seekTo:e}))}),[x,te,j,Y,a,Q,G,J]);(0,n.useEffect)((()=>{const e=new URLSearchParams(location.search);if(e.has("t")){const t=e.get("t")||"0",a=1e3*parseInt(t,10);a<=s.milliseconds&&ie(a)}}),[s,ie]);const le=d.uri,re=function(e){const t=o().from(e);return`/show/${o().hexToId(t?.id||"")}`}(le),oe=(0,n.useCallback)((()=>{const e=x.headerFactory().audiobookLinkFactory().hitUiNavigate({destination:re});Y.logInteraction(e)}),[Y,re,x]),se=(0,n.useCallback)(((e,t)=>{const n=x.actionBarFactory().downloadButtonFactory();t===L.mc.download?Y.logInteraction(n.hitDownload({itemToDownload:a})):t===L.mc.clear?Y.logInteraction(n.hitRemoveDownload({itemToRemoveFromDownloads:a})):t===L.mc.notAllowed&&Y.logInteraction(n.hitUiReveal())}),[Y,x,a]),ce=(0,n.useCallback)((()=>{const e=x.actionBarFactory().contextMenuButtonFactory().hitUiReveal();Y.logInteraction(e)}),[Y,x]),de=(0,n.useCallback)((()=>{const e=x.allChaptersLinkFactory().hitUiNavigate({destination:re});Y.logInteraction(e)}),[Y,re,x]),me=!te&&!c.playable,ue=d.name,pe=m.ag.get("tracklist.a11y.play",t,ue),ge=m.ag.get("tracklist.a11y.pause",t,ue);return n.createElement("section",{"data-testid":"chapter",className:X},n.createElement(h.gF,{backgroundColor:g},n.createElement(C.W,null,n.createElement(N.i,{text:t})),n.createElement("div",{className:H},n.createElement(A._,{menu:n.createElement(f.r,{uri:a,isPlayed:T,onMarkAsPlayed:I,contextUri:a})},n.createElement(h.Oe,{loading:"eager",name:t,images:u,placeholderType:"episode",shape:h.Kc.ROUNDED_CORNERS}))),n.createElement(h.sP,null,n.createElement(h.dy,{small:!0,uppercase:!0},m.ag.get("web-player.audiobooks.chapter")),n.createElement(A._,{menu:n.createElement(f.r,{uri:a,isPlayed:T,onMarkAsPlayed:I,contextUri:a})},n.createElement(h.xd,{dragUri:a,dragLabel:t},n.createElement("span",{"data-testid":"chapterTitle"},t))),n.createElement(A._,{menu:n.createElement(f.r,{uri:a,isPlayed:T,onMarkAsPlayed:I,contextUri:a})},n.createElement(P.Z,{to:re,onClick:oe},n.createElement(h.dy,{large:!0,bold:!0},n.createElement("span",{"data-testid":"bookTitle"},ue)))))),n.createElement(b.o,{backgroundColor:g},n.createElement(b.F,null,ae.nineteen&&n.createElement(M.X,{className:$,size:16}),n.createElement(W.E,{size:W.$.LARGE,fullyPlayed:T,durationMs:s.milliseconds,resumePositionMs:l.playPositionMilliseconds,isPlaying:Q,position:j&&ee||void 0})),n.createElement(b.F,null,n.createElement("div",{onClick:ne},n.createElement(w,{episodeUri:a,showUri:le,isLocked:te,onClick:()=>{ie(l.playPositionMilliseconds)},isPlaying:Q,isPlayDisabled:me,playButtonPlayLabel:pe,playButtonPauseLabel:ge})),!te&&n.createElement(V.o,{uri:a,bookUri:le,onClick:se}),n.createElement(U.yj,{menu:n.createElement(f.r,{uri:a,isPlayed:T,onMarkAsPlayed:I,contextUri:a})},n.createElement(v.z,{label:m.ag.get("more.label.context",t),onClick:ce})))),n.createElement("div",{className:"contentSpacing"},n.createElement(y.P,{buttonSize:"sm",href:le,component:Z.Z,className:q,onClick:de},"See all chapters")))}));var J=a(87462),G=a(99922),Q=a(74849);const j=(0,n.lazy)((()=>Promise.all([a.e(1814),a.e(8396)]).then(a.bind(a,88396))));function ee(e){const t=(0,Q.m)(),a=(0,G.o)();return t?n.createElement(n.Suspense,{fallback:!0},n.createElement(j,(0,J.Z)({reason:"Episode page"},a,e))):null}const te="dpN5ViPOceUWNB5EQPHN",ae="vBcxPq3E2okwgXOkVPEM",ne="HCCBXwdFvq6omWW2hR0N",ie="bJOPO5Zo7dpjSVDwEpSw",le="TXdDDpokVTyJzDEDWHHf",re="HaSbtEVJnxBsaJ5SRi0M",oe="YldGldlfaI9myEGXQf9g",se="qJHVIpJn1vLPWsAKfTEZ",ce="wSIzjkVlr0Zdy7di2vRm",de="hYS_K1NATGyWt6tCSRqQ",me="hVVaM4pF9arpQ8Nvn2a1",ue="zf0Eac1LugsHUacz74Zf",pe="TnNaqxbaI0hzhBQZ7wE0",ge="zSw1lG1TNe_xm6KTqtCv",ye="MlEQDkXnjdKKJueJ9kkB",Ee="jg0xlyD1yjh0DPNG6eOg",ke="QiHXpFb4dLZNOFe5gpp3";var be=a(32667),ve=a(97656),fe=a(34011),he=a(49207);const Ce=({cardHeaderText:e,cardBodyText:t,buttonText:a,buttonTarget:i})=>(0,s.W6)(he.Xd)?n.createElement("div",{className:oe},n.createElement("div",{className:se},n.createElement(be.D,{variant:"balladBold",semanticColor:"textBase"},e),n.createElement(be.D,{semanticColor:"textBase"},t)),n.createElement(fe.D,{buttonSize:"sm",colorSet:"invertedLight",href:o().from(i).toURLPath(!0),component:Z.Z},a)):null,Ne=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:a,hasDescription:i,htmlDescription:l,onExpanded:r,onTimeStampClick:o,playability:s,showHeader:c=!0,spec:d})=>{const u=(0,B.$P)(),p=(i||t)&&c,g=(0,n.useCallback)((e=>{const t=d.readMoreButtonFactory();u.logInteraction(e?t.hitUiReveal():t.hitUiHide()),r?.()}),[d,u,r]);return n.createElement(n.Fragment,null,p&&n.createElement(be.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:ne},m.ag.get("episode.description-title")),t&&n.createElement(Ce,{cardHeaderText:t.cardHeaderText,cardBodyText:t.cardBodyText,buttonText:t.buttonText,buttonTarget:t.buttonTarget}),i&&n.createElement(ve.o,{className:ae,onTimeStampClick:o,maxLines:4,onExpanded:g,content:(a||"").trim(),htmlContent:e&&l?l:void 0,LinkComponent:P.Z,enableTimestamps:s.playable}))};var Pe,Se=a(94184),Te=a.n(Se),Ie=a(97650),xe=a(29325),we=a(77991),De=a(3822),Ue=a(13406),Ae=a(32648);!function(e){e.DESCRIPTION="description",e.TRANSCRIPT="transcript"}(Pe||(Pe={}));const Me=n.memo((function({transcriptSections:e,descriptionContent:t,transcriptContent:a,spec:i}){const l=(0,B.$P)(),[r,o]=(0,n.useState)(Pe.DESCRIPTION),{scrollNodeRef:s}=n.useContext(Ae.VX),{ref:c,inView:d}=(0,Ie.YD)({threshold:[1],root:s.current,rootMargin:`-${Ue.K1+1}px 100000px 0px 100000px`}),u=(0,n.useRef)(null),p=(0,n.useCallback)((e=>{u.current=e,c(e)}),[c]);return(0,n.useEffect)((()=>{const e=u.current?.parentElement?.offsetTop,t=s?.current;if(!e||!t)return;const a=e-Ue.K1;t.scrollTop>a&&t.scrollTo({top:a})}),[s,r]),n.createElement(xe.l,{list:n.createElement(we.F,{className:Te()(ye,{[Ee]:!d}),ref:p},n.createElement(De.c,{label:m.ag.get("web-player.episode.description"),sentenceCase:!0,active:r===Pe.DESCRIPTION,onClick:()=>{const e=i.tabsFactory().descriptionTabButtonFactory().hitUiReveal();l.logInteraction(e),o(Pe.DESCRIPTION)},className:Te()(ke,{[ce]:r===Pe.DESCRIPTION})}),n.createElement(De.c,{label:m.ag.get("web-player.episode.transcript"),sentenceCase:!0,disabled:null===e,active:r===Pe.TRANSCRIPT,onClick:()=>{const e=i.tabsFactory().transcriptTabButtonFactory().hitUiReveal();l.logInteraction(e),o(Pe.TRANSCRIPT)},className:Te()(ke,{[ce]:r===Pe.TRANSCRIPT})}))},null===e||r===Pe.DESCRIPTION?t:a)}));var Le=a(49104);const Re=n.memo((function({transcriptSections:e,onTimeStampClick:t,episodeUri:a}){return n.createElement(n.Fragment,null,n.createElement("div",{className:me},n.createElement(be.D,{variant:"viola",semanticColor:"textBase"},m.ag.get("web-player.episode.transcript.disclaimer"))),e.map(((e,i)=>{const l=`transcript-section-${i}`;return n.createElement("div",{className:de,key:l},n.createElement("button",{className:ue,onClick:()=>{t(e.startMs,l)}},n.createElement(S.D,{id:l,targetURI:o().from(a),fadeOut:!0},n.createElement(be.D,{variant:"finaleBold",semanticColor:"textSubdued",className:pe},(0,Le.m)(e.startMs)))),e.content.map(((e,t)=>n.createElement(be.D,{variant:"viola",semanticColor:"textBase",className:ge,key:`transcript-text-${t}`,dir:"auto"},e))))})))}));var Fe=a(61864);const Oe="axX_dOb7KXxh2BhADfuQ",Be="DIz7crU76YDtXXLx34nF",_e="R2a58pDnuIWBldpbVPRr",We=n.memo((function({title:e,episodes:t,className:a}){return n.createElement("div",{className:Te()(Oe,a)},n.createElement(be.D,{as:"h2",variant:"canon",className:Be},e),n.createElement("div",{className:_e},t.map((e=>n.createElement(Fe.B,(0,J.Z)({key:e.uri},e))))))}));var ze=a(98984);const Ke={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"getRecommendedEpisodes"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"episode"},arguments:[{kind:"Argument",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"recommendedEpisodes"},arguments:[{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"episode"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"name"}},{kind:"Field",name:{kind:"Name",value:"description"}},{kind:"Field",name:{kind:"Name",value:"releaseDate"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"isoString"}}]}},{kind:"Field",name:{kind:"Name",value:"duration"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalMilliseconds"}}]}},{kind:"Field",name:{kind:"Name",value:"contentRating"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"label"}}]}},{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"podcast"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"coverArt"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"sources"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"url"}},{kind:"Field",name:{kind:"Name",value:"width"}},{kind:"Field",name:{kind:"Name",value:"height"}}]}}]}}]}}]}}]}}]}}]}}]}}]},Ze=({uri:e,limit:t})=>{const{data:a}=(i={uri:e,limit:t},l={cacheTime:15*ze.y},(0,ze.a)(Ke,i,l));var i,l;const r=a?.episode?.recommendedEpisodes.items||[];return r?.length>0?n.createElement(We,{title:m.ag.get("mwp.entity.might.like"),episodes:r.map(((e,t)=>({index:t,id:e.episode.id,uri:e.episode.uri,name:e.episode.name,description:e.episode.description??"",isExplicit:e.episode.contentRating?.label===_.KS.Explicit,releaseDate:e.episode.releaseDate?.isoString,is19PlusOnly:e.episode.contentRating?.label===_.KS.NineteenPlus,durationMilliseconds:e.episode.duration.totalMilliseconds,images:e.episode.coverArt?.sources??[],showImages:e.episode.podcast.coverArt?.sources??[],resume_point:null,sharingInfo:null})))}):null};var Ve=a(74600),Xe=a(28248),$e=a(86543),He=a(38470),qe=a(1848),Ye=a(88214),Je=a(21509),Ge=a(82760),Qe=a(86064),je=a(42922);const et="OYehkMWcGJRKPkByp46K",tt="uc1bXkrZqrCz0CMK4lBb",at="qZeibBbA3SVClzEueYND",nt=({episodeUri:e,index:t,duration:a,start:i,stop:l,name:r,uri:o,artists:s,album:c,playable:d})=>{const{isActive:u,isPlaying:p,onClick:g}=(0,Qe.k)({episodeUri:e,start:i,stop:l}),y=(0,n.useCallback)(((e,t)=>{g(t)}),[g]),{spec:E}=(0,B.fU)(qe.createDesktopTrackListRowEventFactory,{data:{position:t,reason:"",uri:o}});return n.createElement(je.ZP,{value:"row",index:t},n.createElement(U.xV,{trigger:"right-click",action:"open",menu:n.createElement(Ye.$,{uri:o})},n.createElement(Ge.c,{uri:o,index:t,ariaRowIndex:t+1,dragMetadata:{name:r,createdBy:s?.[0].name??""},onTriggerPlay:y,isActive:u,isPlayable:d,spec:E},n.createElement(Je.vZ,{ariaColIndex:0},n.createElement(Je.Du,{uri:o,playAriaLabel:m.ag.get("tracklist.a11y.play",r,s?.[0].name),onClick:y,isPlaying:p,isActive:u,spec:E},n.createElement(Je.km,null,n.createElement("img",{className:tt,src:c.image,alt:c.name}))),n.createElement(Je.vm,null,n.createElement(Je.Wh,{titleText:r},r),n.createElement(Je.K9,null,n.createElement(Je.T6,{artists:s,spec:E})))),n.createElement(Je.UA,{ariaColIndex:1},n.createElement(Je.BM,{uri:c.uri,name:c.name,spec:E},c.name)),n.createElement(Je.mU,{ariaColIndex:2},n.createElement(Je.qS,{uri:o,spec:E}),n.createElement(Je.A$,{duration:a}),n.createElement(Je.Zv,{spec:E,menu:n.createElement(Ye.$,{uri:o,artists:s}),label:m.ag.get("more.label.track",r,s?.[0].name)})))))};const it=({uri:e,segmentCount:t})=>{const a=(0,$e.G)(),i=(0,n.useCallback)((async(t,n)=>{const i=Math.ceil(t/2);try{return function(e,t,a){return e.reduce(((e,n,i)=>((i>0||t>0)&&e.push({type:"SPACER",id:`spacer-${e.length}`}),"MUSIC"===n.type?e.push(function(e,t,a){return{type:"MUSIC",index:t,uri:a.uri,episodeUri:e,start:a.start,stop:a.stop,duration:a.duration,name:a.track.name,artists:a.track.artists,album:a.track.album,playable:a.track.playable}}(a,i,n)):"TALK"===n.type&&e.push(function(e,t,a){return{type:"TALK",index:t,uri:e,title:a.title,subtitle:a.subtitle,start:a.start,stop:a.stop,duration:a.duration,showUri:a.show.uri,showName:a.show.name}}(a,i,n)),e)),[])}(await a.getSegments(e,i,n),i,e)}catch(e){return[]}}),[a,e]),l=(0,n.useCallback)((t=>{switch(t.type){case"SPACER":return n.createElement("div",{key:t.id,className:at});case"MUSIC":return n.createElement(nt,(0,J.Z)({key:`${e}-${t.index}`},t));case"TALK":return n.createElement(Ve.t,(0,J.Z)({key:`${e}-${t.index}`},t));default:return(0,He.U)(t)}}),[e]),r=m.ag.get("music_and_talk.in_this_episode");return n.createElement("div",null,n.createElement(be.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:et},r),n.createElement(Xe.Pv,{ariaLabel:r,hasHeaderRow:!0,rowPlaceholder:Xe.hU,columns:[Xe.QD.TITLE,Xe.QD.ALBUM_OR_SHOW,Xe.QD.DURATION],renderRow:l,fetchTracks:i,resolveUri:e=>"MUSIC"===e.type?e.uri:"",limit:50,nrTracks:2*t-1,testID:"music-and-talk-tracklist"}))};var lt=a(43720),rt=a.n(lt),ot=a(62100),st=a.n(ot);let ct;function dt(e){switch(e){case 0:case"UNKNOWN":return ct.UNKNOWN;case 1:case"PLAINTEXT_CONTENT":return ct.PLAINTEXT_CONTENT;case 2:case"MUSIC_TRACK":return ct.MUSIC_TRACK;default:return ct.UNRECOGNIZED}}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.PLAINTEXT_CONTENT=1]="PLAINTEXT_CONTENT",e[e.MUSIC_TRACK=2]="MUSIC_TRACK",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED"}(ct||(ct={}));const mt={encode(e,t=st().Writer.create()){""!==e.version&&t.uint32(10).string(e.version),""!==e.episodeUri&&t.uint32(18).string(e.episodeUri),""!==e.publishedAt&&t.uint32(26).string(e.publishedAt);for(const a of e.sections)ut.encode(a,t.uint32(34).fork()).ldelim();return""!==e.language&&t.uint32(42).string(e.language),!0===e.curated&&t.uint32(48).bool(e.curated),t},decode(e,t){const a=e instanceof st().Reader?e:new(st().Reader)(e);let n=void 0===t?a.len:a.pos+t;const i={version:"",episodeUri:"",publishedAt:"",sections:[],language:"",curated:!1};for(;a.pos<n;){const e=a.uint32();switch(e>>>3){case 1:i.version=a.string();break;case 2:i.episodeUri=a.string();break;case 3:i.publishedAt=a.string();break;case 4:i.sections.push(ut.decode(a,a.uint32()));break;case 5:i.language=a.string();break;case 6:i.curated=a.bool();break;default:a.skipType(7&e)}}return i},fromJSON:e=>({version:yt(e.version)?String(e.version):"",episodeUri:yt(e.episodeUri)?String(e.episodeUri):"",publishedAt:yt(e.publishedAt)?String(e.publishedAt):"",sections:Array.isArray(e?.sections)?e.sections.map((e=>ut.fromJSON(e))):[],language:yt(e.language)?String(e.language):"",curated:!!yt(e.curated)&&Boolean(e.curated)}),toJSON(e){const t={};return void 0!==e.version&&(t.version=e.version),void 0!==e.episodeUri&&(t.episodeUri=e.episodeUri),void 0!==e.publishedAt&&(t.publishedAt=e.publishedAt),e.sections?t.sections=e.sections.map((e=>e?ut.toJSON(e):void 0)):t.sections=[],void 0!==e.language&&(t.language=e.language),void 0!==e.curated&&(t.curated=e.curated),t},fromPartial(e){const t={version:"",episodeUri:"",publishedAt:"",sections:[],language:"",curated:!1};return t.version=e.version??"",t.episodeUri=e.episodeUri??"",t.publishedAt=e.publishedAt??"",t.sections=e.sections?.map((e=>ut.fromPartial(e)))||[],t.language=e.language??"",t.curated=e.curated??!1,t}};const ut={encode:(e,t=st().Writer.create())=>(0!==e.type&&t.uint32(8).int32(e.type),0!==e.startMs&&t.uint32(16).int32(e.startMs),void 0!==e.plaintextContent&&pt.encode(e.plaintextContent,t.uint32(26).fork()).ldelim(),void 0!==e.musicTrack&&gt.encode(e.musicTrack,t.uint32(50).fork()).ldelim(),""!==e.title&&t.uint32(34).string(e.title),void 0!==e.fallback&&pt.encode(e.fallback,t.uint32(42).fork()).ldelim(),t),decode(e,t){const a=e instanceof st().Reader?e:new(st().Reader)(e);let n=void 0===t?a.len:a.pos+t;const i={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};for(;a.pos<n;){const e=a.uint32();switch(e>>>3){case 1:i.type=a.int32();break;case 2:i.startMs=a.int32();break;case 3:i.plaintextContent=pt.decode(a,a.uint32());break;case 6:i.musicTrack=gt.decode(a,a.uint32());break;case 4:i.title=a.string();break;case 5:i.fallback=pt.decode(a,a.uint32());break;default:a.skipType(7&e)}}return i},fromJSON:e=>({type:yt(e.type)?dt(e.type):0,startMs:yt(e.startMs)?Number(e.startMs):0,plaintextContent:yt(e.plaintextContent)?pt.fromJSON(e.plaintextContent):void 0,musicTrack:yt(e.musicTrack)?gt.fromJSON(e.musicTrack):void 0,title:yt(e.title)?String(e.title):"",fallback:yt(e.fallback)?pt.fromJSON(e.fallback):void 0}),toJSON(e){const t={};return void 0!==e.type&&(t.type=function(e){switch(e){case ct.UNKNOWN:return"UNKNOWN";case ct.PLAINTEXT_CONTENT:return"PLAINTEXT_CONTENT";case ct.MUSIC_TRACK:return"MUSIC_TRACK";default:return"UNKNOWN"}}(e.type)),void 0!==e.startMs&&(t.startMs=Math.round(e.startMs)),void 0!==e.plaintextContent&&(t.plaintextContent=e.plaintextContent?pt.toJSON(e.plaintextContent):void 0),void 0!==e.musicTrack&&(t.musicTrack=e.musicTrack?gt.toJSON(e.musicTrack):void 0),void 0!==e.title&&(t.title=e.title),void 0!==e.fallback&&(t.fallback=e.fallback?pt.toJSON(e.fallback):void 0),t},fromPartial(e){const t={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};return t.type=e.type??0,t.startMs=e.startMs??0,t.plaintextContent=void 0!==e.plaintextContent&&null!==e.plaintextContent?pt.fromPartial(e.plaintextContent):void 0,t.musicTrack=void 0!==e.musicTrack&&null!==e.musicTrack?gt.fromPartial(e.musicTrack):void 0,t.title=e.title??"",t.fallback=void 0!==e.fallback&&null!==e.fallback?pt.fromPartial(e.fallback):void 0,t}};const pt={encode(e,t=st().Writer.create()){for(const a of e.plaintext)t.uint32(10).string(a);return t},decode(e,t){const a=e instanceof st().Reader?e:new(st().Reader)(e);let n=void 0===t?a.len:a.pos+t;const i={plaintext:[]};for(;a.pos<n;){const e=a.uint32();if(e>>>3==1)i.plaintext.push(a.string());else a.skipType(7&e)}return i},fromJSON:e=>({plaintext:Array.isArray(e?.plaintext)?e.plaintext.map((e=>String(e))):[]}),toJSON(e){const t={};return e.plaintext?t.plaintext=e.plaintext.map((e=>e)):t.plaintext=[],t},fromPartial(e){const t={plaintext:[]};return t.plaintext=e.plaintext?.map((e=>e))||[],t}};const gt={encode:(e,t=st().Writer.create())=>(""!==e.uri&&t.uint32(10).string(e.uri),t),decode(e,t){const a=e instanceof st().Reader?e:new(st().Reader)(e);let n=void 0===t?a.len:a.pos+t;const i={uri:""};for(;a.pos<n;){const e=a.uint32();if(e>>>3==1)i.uri=a.string();else a.skipType(7&e)}return i},fromJSON:e=>({uri:yt(e.uri)?String(e.uri):""}),toJSON(e){const t={};return void 0!==e.uri&&(t.uri=e.uri),t},fromPartial(e){const t={uri:""};return t.uri=e.uri??"",t}};function yt(e){return null!=e}function Et(e){return e.type===ct.MUSIC_TRACK?{type:"track",startMs:e.startMs,content:e.fallback?.plaintext||[],trackUri:e.musicTrack?.uri}:{type:"text",startMs:e.startMs,content:e.plaintextContent?.plaintext||[]}}st().util.Long!==rt()&&(st().util.Long=rt(),st().configure());const kt=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:a,hasDescription:i,hasMusicAndTalkSegements:l,htmlDescription:r,onExpanded:o,onDescriptionTimestampClick:s,onTranscriptTimestampClick:c,playability:d,segmentCount:u,showUrl:p,transcript:g,transcriptEnabled:E,uri:k,spec:b})=>{const v=(0,B.$P)(),f=(0,n.useMemo)((()=>b.recommendationsFactory()),[b]),h=(0,n.useMemo)((()=>b.descriptionSectionFactory()),[b]),C=(0,n.useMemo)((()=>h.trackListFactory()),[h]),[N,P]=(0,n.useState)(null),S=(0,n.useCallback)((async e=>{const t=await async function(e){try{const t=await fetch(e,{});if(t.ok&&t.body){const e=await t.arrayBuffer();return mt.decode(new Uint8Array(e)).sections.map(Et)}return null}catch(e){return null}}(e);P(t)}),[]);(0,n.useEffect)((()=>{g&&g.length>0&&S(g[0].cdnUrl)}),[S,g]);const T=c=>n.createElement(n.Fragment,null,n.createElement(Ne,{hasDescription:i,contentInformation:t,onTimeStampClick:s,onExpanded:o,description:a,areHTMLDescriptionsEnabled:e,htmlDescription:r,playability:d,showHeader:c,spec:h}),l&&n.createElement(B.Nh,{spec:C},n.createElement(it,{segmentCount:u,uri:k})),p&&n.createElement(y.P,{buttonSize:"sm",className:ie,href:p,component:Z.Z,onClick:()=>{v.logInteraction(h.allEpisodesLinkFactory().hitUiNavigate({destination:p}))}},m.ag.get("episode.see_all_episodes")),n.createElement(ee,{uri:k}),n.createElement(B.Nh,{spec:f},n.createElement(Ze,{uri:k,limit:6})));return n.createElement(n.Fragment,null,E&&g&&g?.length>0?n.createElement(Me,{transcriptSections:N,descriptionContent:T(!1),transcriptContent:n.createElement(Re,{transcriptSections:N||[],onTimeStampClick:c,episodeUri:k}),spec:b}):T(!0))};var bt=a(74414),vt=a(31990);const ft="o6AdXY67I_0xmTg8LBCI",ht="MMZAjWZzcPpNIE06SNuf",Ct="Ccgbgvk9PwclKl5rA6Zj",Nt="NHVXJRN6IZANogQjMWei",Pt="orBUEK6aY0SZVOnrDerw",St="ym1d5PDeTaJLIK0SspBF",Tt="Hko6tpIRefr4NKiTEemO",It="ptUwXq9IK8IQAOE2UiDA",xt="mpyCCCudeQ3uBmgrSAcA",wt=({cardHeaderText:e,cardBodyText:t,buttonText:a,buttonTarget:i})=>(0,s.W6)(he.Xd)?n.createElement("div",{className:Tt},n.createElement("div",{className:It},n.createElement(be.D,{variant:"balladBold",semanticColor:"textBase"},e),n.createElement(be.D,{semanticColor:"textBase"},t)),n.createElement(fe.D,{buttonSize:"sm",colorSet:"invertedLight",href:o().from(i).toURLPath(!0),component:Z.Z},a)):null,Dt=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:a,hasDescription:i,htmlDescription:l,onExpanded:r,onTimeStampClick:o,playability:s,showHeader:c=!0})=>{const d=(i||t)&&c;return n.createElement(n.Fragment,null,d&&n.createElement(be.D,{as:"h2",variant:"canon",semanticColor:"textBase",className:Ct},m.ag.get("episode.description-title")),t&&n.createElement(wt,{cardHeaderText:t.cardHeaderText,cardBodyText:t.cardBodyText,buttonText:t.buttonText,buttonTarget:t.buttonTarget}),i&&n.createElement(ve.o,{className:ht,onTimeStampClick:o,maxLines:4,onExpanded:r,content:(a||"").trim(),htmlContent:e&&l?l:void 0,LinkComponent:P.Z,enableTimestamps:s.playable}))},Ut=({areHTMLDescriptionsEnabled:e,contentInformation:t,description:a,hasDescription:i,htmlDescription:l,onExpanded:r,onTimeStampClick:o,playability:s,showUrl:c,uri:d,seeAllButtonClick:u})=>{return p=!0,n.createElement(n.Fragment,null,n.createElement(Dt,{hasDescription:i,contentInformation:t,onTimeStampClick:o,onExpanded:r,description:a,areHTMLDescriptionsEnabled:e,htmlDescription:l,playability:s,showHeader:p}),c&&n.createElement(y.P,{onClick:u,buttonSize:"sm",className:Nt,href:c,component:Z.Z},m.ag.get("episode.see_all_episodes")),n.createElement(ee,{uri:d}));var p},At="activation-trigger-mme",Mt=({episodeUri:e,showUri:t,isLocked:a,isPlaying:l,isPlayDisabled:r,playButtonPlayLabel:s,playButtonPauseLabel:c,onClick:d})=>{const m=(0,i.v9)((e=>e.platform?.isBrowser)),u=n.createElement(T.l,{showUri:t,enabled:a,renderInline:!1},n.createElement(I.fh,{size:"lg",onClick:d,isPlaying:l,disabled:r,locked:a,ariaPlayLabel:s,ariaPauseLabel:c}));return m?n.createElement(S.D,{id:At,targetURI:o().from(e),fadeOut:!0},u):u};var Lt=a(56802),Rt=a(38894),Ft=a(80219),Ot=a(61901),Bt=a(53538),_t=a(23716),Wt=a(69691),zt=a(37483),Kt=a(89744),Zt=a(95134),Vt=a(20246),Xt=a(87257),$t=a(52759);const Ht=({podcastShort:e,onPlayEpisode:t,isPlaying:a,isActive:l,isFullyPlayed:r,setIsFullyPlayed:o,backgroundColor:s,isLocked:c,onDownloadClick:d,onContextMenuClick:u})=>{const{uri:p,playedState:g,contentRating:y,playability:E}=e,f=(0,i.I0)(),[h]=(0,$t.z)(1e4,(e=>e?.item?.uri===p)),C=(0,F.Y)((e=>e?.duration)),{badges:N,hasBadges:P}=(0,z.r)({contentRating:y?.label}),S=(0,n.useCallback)((e=>{!E.playable&&N.nineteen&&(e.stopPropagation(),f((0,k.RM)(p||"")))}),[p,E.playable,N.nineteen,f]),T=!c&&!e.playability.playable,I=m.ag.get("tracklist.a11y.play",e.name,e.podcast?.name),x=m.ag.get("tracklist.a11y.pause",e.name,e.podcast?.name),w=e.podcast?.uri;return n.createElement(b.o,{backgroundColor:s},n.createElement("div",{className:xt},P&&n.createElement(Zt.g,null,N.nineteen&&n.createElement(M.X,{className:Pt,size:16}),N.explicit?n.createElement(Xt.N,null):null),n.createElement(b.F,null,n.createElement(W.E,{size:W.$.LARGE,fullyPlayed:r,durationMs:l&&C?C:e.duration.milliseconds,releaseDate:Gt(e.releaseDate?.isoString),resumePositionMs:g.playPositionMilliseconds,isPlaying:a,position:l&&h||void 0}))),n.createElement(b.F,null,n.createElement("div",{onClick:S},n.createElement(Mt,{episodeUri:e.uri,showUri:w,isLocked:c,onClick:()=>{t(g.playPositionMilliseconds,!1)},isPlaying:a,isPlayDisabled:T,playButtonPlayLabel:I,playButtonPauseLabel:x})),!c&&n.createElement(zt.p,{onClick:d,uri:e.uri,showUri:w}),n.createElement(Vt.y,{onShow:u,menu:n.createElement(Kt.v,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:w,contextUri:e.uri,isPlayed:r,onMarkAsPlayed:o,userCreated:e.userCreated})},n.createElement(v.z,{label:m.ag.get("more.label.context",e.name)}))))};var qt=a(91355);const Yt=({podcastShort:e,isFullyPlayed:t,setIsFullyPlayed:a,backgroundColor:i,spec:l})=>{const{uri:r,name:o,sharingInfo:s,playedState:c,episodeType:d,releaseDate:u,userCreated:p}=e,g=(0,B.$P)(),y=function(e,t,a,i,l){const r=t===_.Wf.Episode;return(0,qt.G3)(e,i,a,l)?n.createElement(qt.Fg,{isMusicAndTalk:r}):r?m.ag.get("type.showEpisode"):m.ag.get("type.podcastEpisode")}(r,d||_.Wf.Unknown,c.playPositionMilliseconds,Gt(u?.isoString),c.state===_.sY.Completed),E=e.podcast?.uri;return n.createElement(h.gF,{backgroundColor:i},n.createElement(C.W,null,n.createElement(N.i,{text:e.name,dragUri:r,dragLabel:e.name})),n.createElement("div",{className:St},p?.userUri&&n.createElement(A._,{menu:n.createElement(Kt.v,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:E,contextUri:e.uri,isPlayed:t,onMarkAsPlayed:a,userCreated:p})},n.createElement(h.Oe,{loading:"eager",name:e.name,images:e.coverArt,placeholderType:"episode",shape:h.Kc.ROUNDED_CORNERS}))),n.createElement(h.sP,null,n.createElement(h.dy,{small:!0,uppercase:!0},y),p?.userUri&&n.createElement(A._,{menu:n.createElement(Kt.v,{uri:r,sharingInfo:s,showUri:E,contextUri:r,isPlayed:t,onMarkAsPlayed:a,userCreated:p})},n.createElement(h.xd,{dragUri:r,dragLabel:o},o)),p?.userUri&&n.createElement(A._,{menu:n.createElement(Kt.v,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:E,contextUri:e.uri,isPlayed:t,onMarkAsPlayed:a,userCreated:p})},n.createElement(P.Z,{onClick:()=>{const e=l.hitUiNavigate({destination:p?.userUri??""});g.logInteraction(e)},to:p.userUri},n.createElement(h.dy,{large:!0,bold:!0},n.createElement("span",{"data-testid":"showTitle"},p?.displayName))))))},Jt=({podcastShort:e})=>{const{uri:t,episodeType:a,description:l,htmlDescription:r,podcastSubscription:c,segmentsCount:d,podcast:g,contentInformation:y,playedState:E,coverArt:k,userCreated:b}=e,{spec:v}=(0,B.fU)(vt.createDesktopPodcastShortEventFactory,{data:{uri:t}}),f=n.useMemo((()=>v.userProfileLinkFactory({uri:t})),[v,t]),h=n.useMemo((()=>v.actionBarFactory()),[v]),[C,N]=(0,n.useState)(E.state===_.sY.Completed),P=(0,_t.g)(),S=(0,Lt.o)(),T=(0,s.W6)(he.Cz),I=(0,s.W6)(he.Be),x=void 0!==d&&d>0&&I,w=(0,Rt.g)(),{triggerPlay:D,togglePlay:U,isActive:A}=(0,R.n)({uri:t},{featureIdentifier:"episode"}),{isPlaying:M,isActive:L}=(0,Wt.$o)(t),O=k[0].url,W=(0,Ot.Zj)(O||null),z=(0,F.Y)((e=>e?.isPaused??void 0)),K=(0,i.v9)((e=>e.platform?.isBrowser)),Z=c?.isPaywalled&&!c.isUserSubscribed,V=(0,Ft.s)(e,g),X=(0,B.$P)(),$=(0,n.useCallback)(((e,n=!0,i)=>{const l=()=>{z?P.resume():P.pause()};if(Z)return;let r="play";if(!M||0!==e&&n||(r="pause"),S({intent:r,targetUri:t,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),a===_.Wf.Episode&&K)p.y.set((()=>({triggerId:i||At,triggerAction:null})));else if(A&&!n)if(w)l();else{const e=(0,Bt.aK)({isPlaying:M,isActive:L,spec:v.actionBarFactory().playButtonFactory(),logger:X,uri:t});U({loggingParams:e})}else L?l():w?V({seekTo:e}):D({seekTo:e})}),[Z,M,S,t,L,v,X,U,a,K,A,z,P,w,V,D]),H=(0,n.useCallback)((()=>{(0,Bt.qq)(h,X)}),[h,X]),q=(0,n.useCallback)(((e,a)=>{(0,Bt.l7)(a,h.downloadButtonFactory(),X,t)}),[X,t,h]),Y=(0,n.useCallback)((()=>{S({intent:"expand-description",type:"click"})}),[S]),J=(0,n.useCallback)((()=>{const e=b?.userUri??"",t=v.seeAllEpisodesButtonFactory({uri:e}).hitUiNavigate({destination:e});X.logInteraction(t)}),[b,X,v]);(0,n.useEffect)((()=>{const t=new URLSearchParams(location.search);if(t.has("t")){const a=t.get("t")||"0",n=1e3*parseInt(a,10);n<=e.duration.milliseconds&&$(n)}}),[$,e.duration.milliseconds]);const G=!!l||T&&!!r,Q=e.podcast?.uri,j=o().from(Q)?.toURLPath(!0);return n.createElement("section",{"data-testid":"episode",className:ft},n.createElement(u.$,null,m.ag.get("podcasts.episode.seo.title",{name:e.name,show:e.podcast?.name??""})),n.createElement(Yt,{podcastShort:e,isFullyPlayed:C,setIsFullyPlayed:N,backgroundColor:W,spec:f}),n.createElement(Ht,{podcastShort:e,onPlayEpisode:$,isPlaying:M,isActive:L||A,isFullyPlayed:C,setIsFullyPlayed:N,backgroundColor:W,isLocked:!!Z,onContextMenuClick:H,onDownloadClick:q}),n.createElement("div",{className:"contentSpacing"},n.createElement(Ut,{seeAllButtonClick:J,hasDescription:G,contentInformation:y,onTimeStampClick:$,onExpanded:Y,description:e.description,areHTMLDescriptionsEnabled:T,htmlDescription:e.htmlDescription,playability:e.playability,hasMusicAndTalkSegements:x,segmentCount:d,uri:e.uri,showUrl:j})))};function Gt(e){return e?.replace(/T.*/,"")||""}var Qt=a(11486),jt=a(52404),ea=a(86649),ta=a(87834),aa=a(51871),na=a(25988),ia=a(44065);const la=({episode:e,onPlayEpisode:t,isPlaying:a,isActive:l,isFullyPlayed:r,setIsFullyPlayed:o,backgroundColor:s,isLocked:c,spec:d})=>{const{uri:u,playedState:p,contentRating:g,playability:y}=e,E=(0,B.$P)(),f=(0,i.I0)(),[h]=(0,$t.z)(1e4,(e=>e?.item?.uri===u)),C=(0,F.Y)((e=>e?.duration)),{badges:N}=(0,z.r)({contentRating:g?.label}),P=(0,n.useCallback)((e=>{!y.playable&&N.nineteen&&(e.stopPropagation(),f((0,k.RM)(u||"")))}),[u,y.playable,N.nineteen,f]),S=(0,n.useCallback)((()=>{const e=d.contextMenuButtonFactory().hitUiReveal();E.logInteraction(e)}),[E,d]),T=(0,n.useCallback)(((e,t)=>{(0,Bt.l7)(t,d.downloadButtonFactory(),E,u)}),[E,d,u]),I=(0,n.useCallback)((e=>{const t=d.saveButtonFactory();E.logInteraction(e?t.hitLike({itemToBeLiked:u}):t.hitRemoveLike({itemNoLongerLiked:u}))}),[E,d,u]),x=!c&&!e.playability.playable,D=m.ag.get("tracklist.a11y.play",e.name,e.podcast?.name),U=m.ag.get("tracklist.a11y.pause",e.name,e.podcast?.name),A=e.podcast?.uri;return n.createElement(b.o,{backgroundColor:s},n.createElement(b.F,null,N.nineteen&&n.createElement(M.X,{className:le,size:16}),n.createElement(W.E,{size:W.$.LARGE,fullyPlayed:r,durationMs:l&&C?C:e.duration.milliseconds,releaseDate:ca(e.releaseDate?.isoString),resumePositionMs:p.playPositionMilliseconds,isPlaying:a,position:l&&h||void 0})),n.createElement(b.F,null,n.createElement("div",{onClick:P},n.createElement(w,{episodeUri:e.uri,showUri:A,isLocked:c,onClick:()=>{t(p.playPositionMilliseconds)},isPlaying:a,isPlayDisabled:x,playButtonPlayLabel:D,playButtonPauseLabel:U})),!c&&n.createElement(zt.p,{uri:e.uri,showUri:A,onClick:T}),n.createElement(aa.w,{uri:e.uri,size:ia.q.md,onClick:I}),n.createElement(Vt.y,{onShow:S,menu:n.createElement(na.k,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:A,contextUri:e.uri,isPlayed:r,onMarkAsPlayed:o})},n.createElement(v.z,{label:m.ag.get("more.label.context",e.name)}))))};const ra=({episode:e,isFullyPlayed:t,setIsFullyPlayed:a,backgroundColor:i,spec:l})=>{const{uri:r,name:s,sharingInfo:c,playedState:d,episodeType:u,releaseDate:p}=e,g=(0,B.$P)(),y=function(e,t,a,i,l){const r=t===_.Wf.Episode;return(0,qt.G3)(e,i,a,l)?n.createElement(qt.Fg,{isMusicAndTalk:r}):r?m.ag.get("type.showEpisode"):m.ag.get("type.podcastEpisode")}(r,u||_.Wf.Unknown,d.playPositionMilliseconds,ca(p?.isoString),d.state===_.sY.Completed),E=e.podcast?.uri,k=function(e){const t=o().from(e);return`/show/${o().hexToId(t?.id||"")}`}(E),b=(0,n.useCallback)((()=>{g.logInteraction(l.podcastLinkFactory().hitUiNavigate({destination:k}))}),[g,k,l]);return n.createElement(h.gF,{backgroundColor:i},n.createElement(C.W,null,n.createElement(N.i,{text:e.name,dragUri:r,dragLabel:e.name})),n.createElement("div",{className:re},n.createElement(A._,{menu:n.createElement(na.k,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:E,contextUri:e.uri,isPlayed:t,onMarkAsPlayed:a})},n.createElement(h.Oe,{loading:"eager",name:e.name,images:e.coverArt,placeholderType:"episode",shape:h.Kc.ROUNDED_CORNERS}))),n.createElement(h.sP,null,n.createElement(h.dy,{small:!0,uppercase:!0},y),n.createElement(A._,{menu:n.createElement(na.k,{uri:r,sharingInfo:c,showUri:E,contextUri:r,isPlayed:t,onMarkAsPlayed:a})},n.createElement(h.xd,{dragUri:r,dragLabel:s},n.createElement("span",{"data-testid":"episodeTitle"},s))),n.createElement(A._,{menu:n.createElement(na.k,{uri:e.uri,sharingInfo:e.sharingInfo,showUri:E,contextUri:e.uri,isPlayed:t,onMarkAsPlayed:a})},n.createElement(P.Z,{to:k,onClick:b},n.createElement(h.dy,{large:!0,bold:!0},n.createElement("span",{"data-testid":"showTitle"},e.podcast?.name))))))},oa=({episode:e})=>{const{uri:t,episodeType:a,description:l,htmlDescription:r,podcastSubscription:d,segmentsCount:g,podcast:y,contentInformation:E,playedState:k,coverArt:b}=e,{spec:v,logger:f}=(0,B.fU)(c.createDesktopEpisodeEventFactory,{data:{uri:t}}),h=(0,n.useMemo)((()=>v.headerFactory()),[v]),C=(0,n.useMemo)((()=>v.actionBarFactory()),[v]),[N,P]=(0,n.useState)(k.state===_.sY.Completed),S=(0,_t.g)(),T=(0,Lt.o)(),I=(0,s.W6)(he.Cz),w=(0,s.W6)(he.Be),D=void 0!==g&&g>0&&w,U=(0,s.W6)(he.WE,{loadingValue:!1}),A=(0,Rt.g)(),{triggerPlay:M,togglePlay:L,isActive:O}=(0,R.n)({uri:t},{featureIdentifier:"episode"}),{isPlaying:W,isActive:z}=(0,Wt.$o)(t),K=b[0].url,Z=(0,Ot.Zj)(K||null),V=(0,F.Y)((e=>e?.isPaused??void 0)),X=(0,i.v9)((e=>e.platform?.isBrowser)),$=d.isPaywalled&&!d.isUserSubscribed,H=z||O,q=(0,Ft.s)(e,y),Y=(0,n.useCallback)(((e,n,i,l)=>{const r=()=>{V?(l?.("resume"),S.resume()):(l?.("pause"),S.pause())};if($)return;let o="play";if(!W||0!==e&&n||(o="pause"),T({intent:o,targetUri:t,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),a===_.Wf.Episode&&X)p.y.set((()=>({triggerId:i||x,triggerAction:null})));else if(O&&!n)A?r():L({loggingParams:l?.()});else if(z&&!n)r();else{const t=l?.("play");A?q({seekTo:e,loggingParams:t}):M({seekTo:e,loggingParams:t})}}),[$,W,T,t,a,X,z,O,A,V,S,L,q,M]),J=(0,n.useCallback)((e=>{Y(e,!1,void 0,(e=>{const a=v.actionBarFactory().playButtonFactory();let n;return n="pause"===e||W?a.hitPause({itemToBePaused:t}):"resume"===e||H?a.hitResume({itemToBeResumed:t}):a.hitPlay({itemToBePlayed:t}),f.logInteraction(n)}))}),[Y,H,W,f,v,t]),G=(0,n.useCallback)((e=>{Y(e,!0,void 0,(()=>f.logInteraction(v.descriptionSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:t}))))}),[Y,f,v,t]),Q=(0,n.useCallback)(((e,a)=>{Y(e,!0,a,(()=>f.logInteraction(v.transcriptSectionFactory().timestampLinkFactory().hitPlay({itemToBePlayed:t}))))}),[Y,f,v,t]),j=(0,n.useCallback)((()=>{T({intent:"expand-description",type:"click"})}),[T]);(0,n.useEffect)((()=>{if(e){const t=new URLSearchParams(location.search);if(t.has("t")){const a=t.get("t")||"0",n=1e3*parseInt(a,10);n<=e.duration.milliseconds&&Y(n,!0)}}}),[e]);const ee=!!l||I&&!!r,ae=e.podcast?.uri,ne=o().from(ae)?.toURLPath(!0);return n.createElement("section",{"data-testid":"episode",className:te},n.createElement(u.$,null,m.ag.get("podcasts.episode.seo.title",{name:e.name,show:e.podcast?.name??""})),n.createElement(ra,{episode:e,isFullyPlayed:N,setIsFullyPlayed:P,backgroundColor:Z,spec:h}),n.createElement(la,{episode:e,onPlayEpisode:J,isPlaying:W,isActive:H,isFullyPlayed:N,setIsFullyPlayed:P,backgroundColor:Z,isLocked:$,spec:C}),n.createElement("div",{className:"contentSpacing"},n.createElement(kt,{transcriptEnabled:U,transcript:e.transcript,hasDescription:ee,contentInformation:E,onDescriptionTimestampClick:G,onTranscriptTimestampClick:Q,onExpanded:j,description:e.description,areHTMLDescriptionsEnabled:I,htmlDescription:e.htmlDescription,playability:e.playability,hasMusicAndTalkSegements:D,segmentCount:g,uri:e.uri,showUrl:ne,spec:v})))},sa=n.memo((function(){const{episodeId:e}=(0,l.UO)(),t=o().episodeURI(e).toURI(),a=(0,s.W6)(he.uB),i=(0,s.W6)(he.Nf),r=(0,jt.I)(t,a),c=(0,Qt.V)("episode",r);return c?n.createElement(bt.o,{to:c}):r?(0,ea.Ey)(r)?n.createElement(n.Suspense,{fallback:null},n.createElement(ta.C,{pageId:d.Wg.PODCAST_EPISODE_AUDIOBOOK,uri:t},n.createElement(Y,{chapter:r}))):(0,ea.Qj)(r)&&i?n.createElement(n.Suspense,{fallback:null},n.createElement(ta.C,{pageId:d.Wg.PODCAST_EPISODE,uri:t},n.createElement(Jt,{podcastShort:r}))):n.createElement(n.Suspense,{fallback:null},n.createElement(ta.C,{pageId:d.Wg.PODCAST_EPISODE,uri:t},n.createElement(oa,{episode:r}))):n.createElement(g.h,{hasError:!1,errorMessage:m.ag.get("error.not_found.title.podcast")})}));function ca(e){return e?.replace(/T.*/,"")||""}},40080:(e,t,a)=>{a.d(t,{D:()=>i});var n=a(67294);function i(e){const t=(0,n.useRef)();return(0,n.useEffect)((()=>{t.current=e}),[e]),t.current}},13759:(e,t,a)=>{a.d(t,{E:()=>S,$:()=>P});var n=a(67294),i=a(43315);const l="wIA_5Ypq0rltNPeZQpM4",r="Swi6YtNEFCCVz8l4y75v",o="pklLPOhfigdytL9bPoth",s="sb24Y8kdMZInJ8aI8dXT";class c extends n.PureComponent{static defaultProps={current:0,max:1};render(){const{ariaValueText:e,max:t,current:a}=this.props,i=t&&a?100*Math.min(1,a/t):0,c={transform:`translateX(-${100-i}%)`},d=e||`${Math.round(i)}%`;return n.createElement("div",{className:l,role:"progressbar",tabIndex:0,"aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":t,"aria-valuetext":d},n.createElement("div",{className:r}),n.createElement("div",{className:o},n.createElement("div",{"data-testid":"progressBarFg",className:s,style:c})))}}const d=c,m="qfYkuLpETFW3axnfMntO",u="jOd7lbjiyc_kvRJaAbeL",p="_q93agegdE655O5zPz6l",g="z7Yl7CIT1AB0y91f_moh",y="iLIlkUcfIq56KncGtX7u",E="nV50yZ6BR_TIuWP3l7b1",k="qLjIx_SzBEpDRA_q7kxQ";var b=a(32667),v=a(28066),f=a(96206),h=a(94184),C=a.n(h),N=a(33953);let P;!function(e){e[e.LARGE=0]="LARGE",e[e.SMALL=1]="SMALL"}(P||(P={}));const S=e=>{const{resumePositionMs:t=0,releaseDate:a,isPlaying:l,fullyPlayed:r,durationMs:o,size:s=P.SMALL,position:c=t}=e;return n.createElement("div",{className:C()(m,{[u]:s===P.LARGE})},a?n.createElement(b.D,{as:"p",variant:"mesto",className:p},(0,i.rL)((0,i.RX)(a))):null,(()=>{if(r&&!l)return n.createElement("div",{className:y},n.createElement(b.D,{as:"p",variant:"mesto",className:g},f.ag.get("episode.played")),n.createElement(v.N,{iconSize:16,className:k}));if(c>0||l){const e=Math.ceil(Math.max(o-c,0));return n.createElement("div",{className:y},n.createElement(b.D,{as:"p",variant:"mesto",className:g},n.createElement(N.ng,{durationMs:e})))}return n.createElement(b.D,{as:"p",variant:"mesto",className:p},n.createElement(N.nL,{durationMs:o}))})(),!r&&c>0||l?n.createElement("div",{className:E},n.createElement(d,{current:c,max:o,isEnabled:!1})):null)}}}]);
//# sourceMappingURL=xpui-routes-episode.js.map