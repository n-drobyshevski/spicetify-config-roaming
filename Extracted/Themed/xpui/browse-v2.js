"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[3817],{51216:(e,n,t)=>{t.d(n,{c:()=>k});var i=t(67294),a=t(32667),r=t(9348),l=t(18261),o=t(28137),s=t(36590),d=t(8498),m=t(21610),c=t(16257);const u="Xk3_ws6o9K6gsByypayv",k=({name:e,uri:n,images:t,authorName:k,isHero:p,onClick:f,testId:g,index:S,requestId:b,isLocked:v=!1})=>{let N;return N=p?i.createElement(m.Z,{index:S,onClick:f,headerText:e,featureIdentifier:"audiobook",uri:n,isPlayable:!1,renderCardImage:()=>i.createElement(d.x,{isHero:!0,images:t}),renderSubHeaderContent:()=>i.createElement(i.Fragment,null,i.createElement(a.D,{variant:"mesto"},k),i.createElement(c.k,null,"AUDIOBOOK")),testId:g,requestId:b}):i.createElement(s.C,{index:S,onClick:f,headerText:e,featureIdentifier:"audiobook",uri:n,isPlayable:!1,renderCardImage:()=>i.createElement(d.x,{images:t}),renderSubHeaderContent:()=>i.createElement(i.Fragment,null,v&&i.createElement(r.W,{iconSize:16,className:u}),i.createElement(a.D,{as:"span",variant:"mesto"},k)),testId:g,requestId:b}),i.createElement(l._,{menu:i.createElement(o.X,{uri:n})},N)}},30523:(e,n,t)=>{t.d(n,{P:()=>k});var i=t(87462),a=t(67294),r=t(39278),l=t(96206),o=t(18261),s=t(43480),d=t(36590),m=t(8498),c=t(21610),u=t(16257);const k=a.memo((function(e){const{images:n,name:t,uri:k,onClick:p,isHero:f,testId:g,index:S,requestId:b}=e;let v;const N=(0,a.useCallback)((()=>a.createElement(m.x,{isCircular:!0,isHero:f,images:n,FallbackComponent:e=>a.createElement(r.a,(0,i.Z)({iconSize:64},e))})),[n,f]),y=(0,a.useCallback)((()=>f?a.createElement(u.k,null,l.ag.get("card.tag.profile")):l.ag.get("card.tag.profile")),[f]);return v=f?a.createElement(c.Z,{index:S,onClick:p,headerText:t,featureIdentifier:"profile",uri:k,isPlayable:!1,renderCardImage:N,renderSubHeaderContent:y,testId:g,requestId:b}):a.createElement(d.C,{index:S,onClick:p,headerText:t,featureIdentifier:"profile",uri:k,isPlayable:!1,renderCardImage:N,renderSubHeaderContent:y,testId:g,requestId:b}),a.createElement(o._,{menu:a.createElement(s.I,{uri:k})},v)}))},22578:(e,n,t)=>{t.d(n,{$:()=>u});var i=t(67294),a=t(64593),r=t(96206),l=t(69691),o=t(8341),s=t(89952),d=t(51615),m=t(24183);function c(e){return e.includes("Spotify")?e:`Spotify – ${e}`}const u=({children:e,usePlayingItem:n})=>{let t=c(e);(e=>{const{mainLandmarkRef:n}=(0,m.Oh)(),t=(0,d.k6)(),a=t.location?.state?.preventMoveFocus,r=(0,i.useRef)(t.length<2);r.current=t.length<2,(0,i.useEffect)((()=>{const t=n.current;!a&&!r.current&&t&&e&&(t.setAttribute("aria-label",e),t.focus())}),[e,n,a])})(e);const{isPlaying:u}=(0,l.IK)(),k=(0,o.Y)((e=>e?.item));return k&&(u||n)&&((0,s.G_)(k)?t=[k.name,k.artists.map((e=>e.name)).join(r.ag.getSeparator())].join(" • "):(0,s.iw)(k)?t=[k.name,k.show.name].join(" • "):(0,s.k6)(k)&&(t=c(r.ag.get("ad-formats.advertisement")))),i.createElement(a.q,{defaultTitle:"Spotify",defer:!1},i.createElement("title",null,t))}},70369:(e,n,t)=>{t.d(n,{$:()=>i.$});var i=t(22578)},3691:(e,n,t)=>{t.r(n),t.d(n,{BrowsePage:()=>R});var i=t(67294),a=t(94184),r=t.n(a),l=t(14908),o=t(96206),s=t(70937),d=t(54444),m=t(38470),c=t(70369),u=t(6158),k=t(18686),p=t(88767),f=t(3775),g=t(63093),S=t(45728),b=t(8982),v=(t(98984),t(54844));const N={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"browsePage"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pagePagination"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PaginationInput"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"sectionPagination"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PaginationInput"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"browse"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"pagePagination"},value:{kind:"Variable",name:{kind:"Name",value:"pagePagination"}}},{kind:"ObjectField",name:{kind:"Name",value:"sectionPagination"},value:{kind:"Variable",name:{kind:"Name",value:"sectionPagination"}}},{kind:"ObjectField",name:{kind:"Name",value:"uri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BrowseSectionContainer"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"header"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"backgroundImage"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"browseImageSources"}}]}},{kind:"Field",name:{kind:"Name",value:"color"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"hex"}}]}},{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transformedLabel"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"sections"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"pagingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nextOffset"}}]}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"FragmentSpread",name:{kind:"Name",value:"browseSectionItem"}}]}}]}}]}}]}}]}},...v.N9.definitions,...v.K1.definitions,{kind:"FragmentDefinition",name:{kind:"Name",value:"browseSectionItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BrowseSection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"uri"}},{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transformedLabel"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"sectionItems"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"browseItem"}}]}}]}}]}},...v.H5.definitions,...v.RL.definitions,...v.X6.definitions,...v.nE.definitions,...v._C.definitions,...v.Tf.definitions,...v.tl.definitions,...v.dV.definitions,...v.qJ.definitions,...v.YJ.definitions,...v.zZ.definitions,...v.dK.definitions,...v.$z.definitions]};var y=t(47134),E=t(73012),I=t(95888),h=t(37081),w=t(60289),F=t(59482),C=t(72907);const x=({images:e,color:n=E.k77,title:t})=>{const a=0===e.length?w.fR.SMALL:w.fR.DEFAULT;return i.createElement(i.Fragment,null,i.createElement(w.gF,{backgroundImages:e,backgroundColor:n,size:a},i.createElement(F.W,null,t?i.createElement(C.i,{text:t}):null),i.createElement(w.sP,null,t?i.createElement(w.xd,null,t):null)),i.createElement(I.I,{backgroundColor:n}),i.createElement(h.H,{color:n}))};var _=t(23082),P=t(19897);const T=({uri:e,fallback:n})=>{const{section:t,error:a,fetchNextItems:r}=(0,_.X)(e),l=t?.data?.title?.transformedLabel,o=t?.sectionItems.items??[];return 0===o.length||null!==a?n():i.createElement(s.C,{onReachBottom:r},i.createElement(k.q,{title:l??"",index:0,id:e,showAll:!0},o.map(((e,n)=>(0,P.O)(e,n)))))},O="lXcKpCtaEeFf1HifX139",B="KZy9ufUbVUdmV7qnCE2e",R=({uri:e})=>{const{header:n,sections:t,error:a,fetchNextSections:m}=(e=>{const{request:n}=(0,i.useContext)(f.Ax),{data:t,isLoading:a,error:r,fetchNextPage:l}=(0,p.useInfiniteQuery)(["browse","page",e,{numberOfSections:10,numberOfItems:10}],(async({pageParam:t=0})=>(0,g.J)(n,N,function(e,n,t,i){return{pagePagination:{offset:n,limit:10},sectionPagination:{offset:0,limit:10},uri:e}}(e,t))),{cacheTime:S.ws,staleTime:S._p,getNextPageParam:e=>{if("BrowseSectionContainer"===e?.data.browse?.__typename)return e.data.browse.sections?.pagingInfo.nextOffset??void 0}}),o=(0,i.useCallback)((async()=>{await l()}),[l]),s=(0,i.useMemo)((()=>t?.pages?t.pages.reduce(((e,n)=>"BrowseSectionContainer"===n?.data.browse?.__typename&&n.data.browse.sections?.items?[...e,...n.data.browse.sections.items]:e),[]):[]),[t?.pages]);return{header:(0,i.useMemo)((()=>{if(t?.pages)for(const e of t.pages)if("BrowseSectionContainer"===e?.data.browse?.__typename)return{title:e.data.browse.header?.title?.transformedLabel??void 0,color:e.data.browse.header?.color?.hex??void 0,images:e.data.browse.header?.backgroundImage?.sources.map(b.N)??[]}}),[t?.pages]),sections:s,error:r,loading:a,fetchNextSections:o}})(e),{spec:k,UBIFragment:v}=(0,d.fU)(l.createDesktopGenreEventFactory,{data:{identifier:e,uri:e}}),y=(0,i.useMemo)((()=>k.shelvesFactory()),[k]);return 0===t.length||null!==a?i.createElement(u.h,{hasError:null!==a,errorMessage:o.ag.get("error.generic")}):i.createElement(v,{spec:k},i.createElement(c.$,null,n?.title??o.ag.get("browse")),n?.title?i.createElement("div",{className:O},i.createElement(x,{title:n.title,color:n.color,images:n.images})):null,i.createElement(v,{spec:y},i.createElement("div",{className:r()("contentSpacing",B)},1===t.length?i.createElement(T,{uri:t[0].uri,fallback:()=>D(t[0],0,!0)}):i.createElement(s.C,{onReachBottom:m},t.map(((e,n)=>D(e,n,!1)))))))};function D(e,n,t){switch(e.data?.__typename){case"BrowseGenericSectionData":return i.createElement(k.q,{title:e.data?.title?.transformedLabel??"",key:e.uri,total:e.sectionItems.totalCount,seeAllUri:(0,y.px)(e.uri),index:n,id:e.uri,showAll:t},e.sectionItems.items.map(((e,n)=>(0,P.O)(e,n))));case"BrowseGridSectionData":return i.createElement(k.q,{title:e.data?.title?.transformedLabel??"",key:e.uri,total:e.sectionItems.totalCount,index:n,id:e.uri,showAll:!0},e.sectionItems.items.map(((e,n)=>(0,P.O)(e,n))));case"BrowseRelatedSectionData":case"BrowseSingleItemSectionData":case void 0:return null;default:return(0,m._)(e.data),null}}},89503:(e,n,t)=>{t.r(n),t.d(n,{BrowseSection:()=>g});var i=t(67294),a=t(94184),r=t.n(a),l=t(14908),o=t(96206),s=t(70937),d=t(54444),m=t(70369),c=t(6158),u=t(18686),k=t(23082),p=t(19897);const f="Z3ISr2E5M6kLGdC7dCDQ",g=({uri:e})=>{const{section:n,error:t,fetchNextItems:a}=(0,k.X)(e),{spec:g,UBIFragment:S}=(0,d.fU)(l.createDesktopGenreEventFactory,{data:{identifier:e,uri:e}}),b=(0,i.useMemo)((()=>g.shelvesFactory()),[g]),v=n?.data?.title?.transformedLabel,N=n?.sectionItems.items??[];return 0===N.length||null!==t?i.createElement(c.h,{hasError:null!==t,errorMessage:o.ag.get("error.generic")}):i.createElement(S,{spec:g},i.createElement(m.$,null,v??o.ag.get("browse")),i.createElement(S,{spec:b},i.createElement("div",{className:r()("contentSpacing",f)},i.createElement(s.C,{onReachBottom:a},i.createElement(u.q,{title:v??"",index:0,id:e,showAll:!0},N.map(((e,n)=>(0,p.O)(e,n))))))))}},19897:(e,n,t)=>{t.d(n,{O:()=>v});var i=t(38470),a=t(67294),r=t(96206),l=t(3634),o=t(89477),s=t(51216),d=t(61864),m=t(46309),c=t(30523),u=t(95332),k=t(97891),p=t(36790),f=t(7073),g=t(72169),S=t(47134),b=t(8982);function v(e,n){switch(e.content.__typename){case"AlbumResponseWrapper":case"ArtistResponseWrapper":case"EpisodeOrChapterResponseWrapper":case"PlaylistResponseWrapper":case"PodcastOrAudiobookResponseWrapper":case"TrackResponseWrapper":case"UserResponseWrapper":case"BrowseXlinkResponseWrapper":case"BrowseSectionContainerWrapper":return function(e,n,t){if("GenericError"===e.__typename||"NotFound"===e.__typename||"RestrictedContent"===e.__typename)return null;const v=(0,b._)(e);switch(e.__typename){case"Album":return a.createElement(l.r,{key:e.uri,uri:e.uri,name:e.name,images:v,sharingInfo:null,artists:(0,g.BH)(e.artists),index:n});case"Artist":return a.createElement(o.I,{key:e.uri,uri:e.uri,name:e.profile.name,images:v,index:n});case"Audiobook":return a.createElement(s.c,{key:e.uri,uri:e.uri,name:e.name,images:v,authorName:e.authors?.map((e=>e?.name)).join(r.ag.getSeparator())??"",index:n});case"Chapter":return a.createElement(d.B,{key:e.uri,uri:e.uri,name:e.name,images:v,showImages:v,description:"",durationMilliseconds:e.duration.totalMilliseconds,releaseDate:(0,g.Bq)(e.releaseDate),resume_point:{resume_position_ms:e.playedState.playPositionMilliseconds,fully_played:e.playedState.state===f.sY.Completed},isExplicit:(0,g.sW)(e.contentRating),is19PlusOnly:(0,g.R7)(e.contentRating),sharingInfo:null,index:n});case"Episode":return a.createElement(d.B,{key:e.uri,uri:e.uri,name:e.name,images:v,showImages:v,description:e.description??"",durationMilliseconds:e.duration.totalMilliseconds,releaseDate:(0,g.Bq)(e.releaseDate),resume_point:{resume_position_ms:e.playedState.playPositionMilliseconds,fully_played:e.playedState.state===f.sY.Completed},isExplicit:(0,g.sW)(e.contentRating),is19PlusOnly:(0,g.R7)(e.contentRating),sharingInfo:null,index:n});case"Playlist":{let t="";return"User"===e.ownerV2.data.__typename&&(t=e.ownerV2.data.name),a.createElement(m.Z,{key:e.uri,uri:e.uri,name:e.name,images:v,description:e.description,authorName:t,index:n})}case"Podcast":return a.createElement(u._,{key:e.uri,uri:e.uri,name:e.name,images:v,publisher:e.publisher?.name??"",sharingInfo:null,mediaType:(0,g.x7)(e.mediaType),index:n});case"Track":return a.createElement(k.G,{key:e.uri,uri:e.uri,name:e.name,images:v,artists:(0,g.mQ)(e.artists),album:e.albumOfTrack?{uri:e.albumOfTrack.uri,name:e.albumOfTrack.name}:null,isExplicit:(0,g.sW)(e.contentRating),is19PlusOnly:(0,g.R7)(e.contentRating),sharingInfo:null,index:n});case"User":return a.createElement(c.P,{key:e.uri,uri:e.uri,name:e.name,images:v,index:n});case"BrowseSectionContainer":return a.createElement(p.p,{key:t,title:e.data?.cardRepresentation?.title?.transformedLabel??"",pageId:"search",href:(0,S.t1)(t),color:e.data?.cardRepresentation?.backgroundColor?.hex,imageUrl:v[0]?.url,ubiId:t,index:n});case"BrowseSpacesHub":return a.createElement(p.p,{key:t,title:e.title?.transformedLabel??"",pageId:"search",href:(0,S.wJ)(e.spaceId),color:e.backgroundColor?.hex,imageUrl:v[0]?.url,ubiId:t,index:n});case"BrowseClientFeature":return a.createElement(p.p,{key:t,title:e.title?.transformedLabel??"",pageId:"search",href:(0,S.t1)(t),color:e.backgroundColor?.hex,imageUrl:v[0]?.url,ubiId:t,index:n});case"BrowseExternalHref":return null;default:return(0,i._)(e),null}}(e.content.data,n,e.uri);case"UnknownType":case"NoContent":break;default:(0,i._)(e.content)}return null}},23082:(e,n,t)=>{t.d(n,{X:()=>c});var i=t(67294),a=t(88767),r=t(3775),l=t(63093),o=t(38470),s=t(45728),d=(t(98984),t(54844));const m={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"browseSection"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"pagination"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PaginationInput"}}}},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"uri"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"browseSection"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"sectionPagination"},value:{kind:"Variable",name:{kind:"Name",value:"pagination"}}},{kind:"ObjectField",name:{kind:"Name",value:"sectionUri"},value:{kind:"Variable",name:{kind:"Name",value:"uri"}}}]}}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"BrowseSection"}},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"data"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"__typename"}},{kind:"Field",name:{kind:"Name",value:"title"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"transformedLabel"}}]}}]}},{kind:"Field",name:{kind:"Name",value:"sectionItems"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalCount"}},{kind:"Field",name:{kind:"Name",value:"pagingInfo"},selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nextOffset"}}]}},{kind:"Field",name:{kind:"Name",value:"items"},selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"browseItem"}}]}}]}}]}}]}}]}},...d.H5.definitions,...d.RL.definitions,...d.X6.definitions,...d.N9.definitions,...d.K1.definitions,...d.nE.definitions,...d._C.definitions,...d.Tf.definitions,...d.tl.definitions,...d.dV.definitions,...d.qJ.definitions,...d.YJ.definitions,...d.zZ.definitions,...d.dK.definitions,...d.$z.definitions]},c=e=>{const{request:n}=(0,i.useContext)(r.Ax),{data:t,isLoading:d,error:c,fetchNextPage:u}=(0,a.useInfiniteQuery)(["browse","section",e,{numberOfItems:20}],(async({pageParam:t=0})=>(0,l.J)(n,m,function(e,n,t){return{pagination:{offset:n,limit:t},uri:e}}(e,t,20))),{cacheTime:s.ws,staleTime:s._p,getNextPageParam:e=>{if("BrowseSection"===e?.data.browseSection?.__typename)return e.data.browseSection.sectionItems.pagingInfo.nextOffset??void 0}}),k=(0,i.useCallback)((async()=>{await u()}),[u]);return{section:(0,i.useMemo)((()=>t?.pages?t.pages.reduce(((e,n)=>{if(!n?.data.browseSection)return e;switch(n.data.browseSection.__typename){case"BrowseSection":{if(null===e)return n.data.browseSection;const t={...e};return t.sectionItems.items.concat(n.data.browseSection.sectionItems.items),t}case"GenericError":case"NotFound":return e;default:return(0,o._)(n.data.browseSection),e}}),null):null),[t?.pages]),error:c,loading:d,fetchNextItems:k}}},70937:(e,n,t)=>{t.d(n,{C:()=>d});var i=t(67294),a=t(97650),r=t(94184),l=t.n(r);const o="eqw9lvuoZHrkWMTdyTpY",s="lb08f71wES9AQnKx6e0R",d=i.memo((function(e){const{triggerOnInitialLoad:n=!1,onReachBottom:t,showScrollbar:r=!0,horizontalScroll:d=!1}=e,{ref:m,inView:c}=(0,a.YD)({initialInView:n});return(0,i.useEffect)((()=>{c&&t&&t()}),[c,t]),i.createElement("div",{className:l()({[s]:!r,[o]:d}),"data-testid":"infinite-scroll-list"},e.children,i.createElement("div",{ref:m}))}))}}]);
//# sourceMappingURL=browse-v2.js.map