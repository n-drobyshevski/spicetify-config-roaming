"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[7704],{70105:(e,t,n)=>{n.d(t,{n:()=>Ce});var a=n(67294),r=n(50114),c=n(69559),i=n(27937),l=n(42781),o=n(4236),s=n(13218),m=n(70296),u=n(87462),d=n(69518),E=n.n(d),g=n(24524),f=n(86250),p=n(39278),h=n(61251),y=n(96206),v=n(18261),S=n(4232),k=n(80507),_=n(25988),b=n(35410),C=n(86514),P=n(97081),T=n(20006),N=n(26010),x=n(69010),I=n(52759),w=n(69691);const B="view-homeShortcutsGrid-shortcuts",M="view-homeShortcutsGrid-grid",U="view-homeShortcutsGrid-shortcutLink",D="view-homeShortcutsGrid-shortcut",H="view-homeShortcutsGrid-draggable",A="view-homeShortcutsGrid-imageContainer",F="view-homeShortcutsGrid-imageWrapper",Z="view-homeShortcutsGrid-image",L="CKxS_0I5yf3i15WAjzvE",O="view-homeShortcutsGrid-main",R="view-homeShortcutsGrid-nameWrapper",W="view-homeShortcutsGrid-name",z="EzRmGRncgnv1zFgF4dqE",G="bPmmKmSPLKMhtJSaUJRX",q="vpQWUBWS_lXRLZMRJT7w",$="GSv7K805J9Jw7LB9tn2A",J="view-homeShortcutsGrid-PlayButtonContainer",Y="s9c9x_mJq197U2hBzGtV",K=a.memo((function({item:e}){const{useDownloading:t}=(0,a.useContext)(N.I),{currentAvailability:n}=t(e.uri),r=e.duration_ms??0,{isPlaying:c,isActive:i}=(0,w.$o)(e.uri),[l]=(0,I.z)(1e4,(t=>t.item?.uri===e.uri)),o=e.resume_point?.resume_position_ms??0,s=c||i?l:o,m=Math.round(100/(r/s)),u=n===x.V8.YES,d=r&&s>0;return u||d?a.createElement("div",{className:q},u?a.createElement(P.E,{iconSize:16,semanticColor:"textSubdued"}):null,d?a.createElement(T.k,{className:$,value:m,semanticColor:"essentialBase"}):null):null}));var V=n(94184),j=n.n(V),X=n(51615),Q=n(32667),ee=n(43864),te=n(82627),ne=n(91355),ae=n(84242),re=n(54444),ce=n(57784),ie=n(56802),le=n(67892),oe=n(89104),se=n(49961);const me=a.memo((function({images:e=[],fallbackIcon:t=g.U}){const n=(0,se.X)(e),r=n?.url?F:L;return a.createElement("div",{className:A},a.createElement("div",{className:r},a.createElement(oe.E,{className:Z,src:n?.url,loading:"lazy",testid:"shortcut-image"},a.createElement(t,{"aria-hidden":!0}))))})),ue=a.memo((function({index:e,item:t,fallbackIcon:n,showPlayButton:r,extraContent:c,onContextMenu:i=(()=>{}),onTouchStart:l=(()=>{}),onTouchEnd:o=(()=>{})}){const s=(0,X.k6)(),u=(0,ie.o)(),{setColorFromUri:d,resetColor:g,clearColor:f}=(0,m.WQ)(),p=(0,ne.G3)(t.uri,t.release_date,t.resume_point?.resume_position_ms,t.resume_point?.fully_played),{spec:h,logger:y}=(0,re.fU)(ee.createDesktopShortcutsPlayNavCardEventFactory,{data:{position:e,uri:t.uri}}),{isPlaying:v,isActive:S,togglePlay:k}=(0,ae.n)({uri:t.uri},{featureIdentifier:"home",referrerIdentifier:"home"});const _=(0,a.useCallback)((()=>{u({targetUri:t.uri,intent:"navigate",type:"click"});const e=h.hitUiNavigate({destination:t.uri});y.logInteraction(e),s.push(E().from(t.uri).toURLPath(!0))}),[s,t.uri,y,u,h]),b=(0,a.useCallback)((()=>{d(t.uri)}),[t.uri,d]);(0,a.useEffect)((()=>()=>{f()}),[f]);const C=(0,re.Wi)(h),P=(0,ce.O1)([t.uri],t.name);return a.createElement("div",{ref:C,className:D,onContextMenu:i,onTouchStart:l,onTouchEnd:o,onMouseEnter:b,onMouseLeave:g},a.createElement("div",{className:H,onDragStart:P},a.createElement(me,{images:t.images,fallbackIcon:n}),a.createElement("div",{className:O},a.createElement("div",{className:R},a.createElement("div",{className:W},p&&a.createElement(ne.Rd,{className:G}),a.createElement(le.r,{to:t.uri,onClick:_,title:t.name},a.createElement(Q.D,{as:"p",variant:"balladBold",className:z},t.name))),c||null),r&&a.createElement("div",{className:j()(J,{[Y]:v})},a.createElement(te.fh,{isPlaying:v,onClick:function(){u({targetUri:t.uri,intent:v?"pause":"play",type:"click"});const e=h.playButtonFactory();let n;n=v?e.hitPause({itemToBePaused:t.uri}):S?e.hitResume({itemToBeResumed:t.uri}):e.hitPlay({itemToBePlayed:t.uri});const a=y.logInteraction(n);k({loggingParams:a})}}))),a.createElement("div",{onClick:_,className:U})))})),de=a.memo((function(e){return E().isCollection(e.item.uri)?a.createElement(ue,(0,u.Z)({},e,{fallbackIcon:g.U})):a.createElement(v._,{menu:a.createElement(b.X,{uri:e.item.uri})},a.createElement(ue,(0,u.Z)({},e,{fallbackIcon:g.U})))})),Ee=a.memo((function(e){return a.createElement(v._,{menu:a.createElement(S.Y,{uri:e.item.uri})},a.createElement(ue,(0,u.Z)({},e,{fallbackIcon:f.c})))})),ge=a.memo((function(e){return a.createElement(v._,{menu:a.createElement(k.m,{uri:e.item.uri})},a.createElement(ue,(0,u.Z)({},e,{fallbackIcon:p.a})))})),fe=a.memo((function(e){return a.createElement(v._,{menu:a.createElement(C.M,{uri:e.item.uri})},a.createElement(ue,(0,u.Z)({},e,{fallbackIcon:h.J,showPlayButton:!1})))})),pe=a.memo((function(e){return a.createElement(v._,{menu:a.createElement(_.k,{uri:e.item.uri})},a.createElement(ue,(0,u.Z)({},e,{fallbackIcon:h.J,extraContent:a.createElement(K,e)})))}));var he=n(11436),ye=n(49068);const ve="J6UEDIqMSJhYlwGoeUZB",Se="ZjFf4lVC48DSryAjP9qB",ke=a.memo((function(e){const t=(0,ye.x)(),n={...e.item,...t};return a.createElement(ue,(0,u.Z)({},e,{item:n,fallbackIcon:()=>a.createElement("div",{className:ve},a.createElement(he.P,{iconSize:32,className:Se}))}))})),_e=270,be=a.memo((function({title:e,tagline:t,items:n}){const{fetchMultipleColors:r}=(0,m.WQ)(),[i,u]=(0,a.useState)({minWidth:_e,itemHeight:80,showPlayButton:!0}),d=!(0,o.k)(),g=(0,a.useRef)(null),f=e??(()=>{const e=(new Date).getHours();let t=y.ag.get("home.evening");return e>=5&&e<12?t=y.ag.get("home.morning"):e>=12&&e<18&&(t=y.ag.get("home.afternoon")),t})(),p=(0,a.useCallback)((()=>{if(!g.current)return;const e=g.current.offsetWidth,t=e<600?200:_e;const n=Math.min(Math.floor((e+24)/(t+24)),3);u({minWidth:t,showPlayButton:(e-24*(n-1))/n>=_e,itemHeight:e>=858?80:64})}),[]);if((0,c.a)((()=>{p()})),(0,a.useEffect)((()=>{p()}),[p]),(0,a.useEffect)((()=>{const e=n?.map(m.lh)||[];r(e)}),[n,r]),d||!n?.length)return null;const h=64===i.itemHeight?12:16;return a.createElement("section",{className:B,"aria-label":f,ref:g},a.createElement(s.r,{title:f,titleVariant:"alto",tagline:t}),a.createElement("div",{className:M,style:{"--min-column-width":`${i.minWidth}px`,"--column-gap":"24px","--row-gap":`${h}px`,"--item-height":`${i.itemHeight}px`}},n.filter(((e,t)=>t<6)).map(((e,t)=>{if((e=>{if(null!==e&&"object"==typeof e){const{type:t,name:n}=e;return t===l.p.YOUR_EPISODES&&"string"==typeof n}return!1})(e))return a.createElement(ke,{index:t,key:`${t}-${e.uri}`,item:e,showPlayButton:i.showPlayButton,shouldSetBackgroundColor:0===t});const n=function(e){const t=(E().from(e)||{}).type;switch(t){case E().Type.ARTIST:return ge;case E().Type.ALBUM:case E().Type.COLLECTION_ALBUM:return Ee;case E().Type.PLAYLIST:case E().Type.PLAYLIST_V2:return de;case E().Type.SHOW:return fe;case E().Type.EPISODE:return pe;case E().Type.COLLECTION:return de;default:return console.warn(`Unable to resolve entity shortcut from ${e} of type "${t||"unknown"}"`),fe}}(e.uri);return a.createElement(n,{index:t,key:`${t}-${e.uri}`,item:e,showPlayButton:i.showPlayButton,shouldSetBackgroundColor:0===t})}))))})),Ce=(0,r.P)(be,(()=>null),(e=>(0,i.vK)(e,"HomeShortcutsGrid")))},30386:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var a=n(67294),r=n(94184),c=n.n(r),i=n(73526),l=n(96206),o=n(70369),s=n(6158),m=n(13983),u=n(54444),d=n(23060),E=n(81993),g=n(29393),f=n(38470),p=n(86868),h=n(18686),y=n(30343);const v=({spec:e,section:t,index:n})=>a.createElement(u.Nh,{spec:e.shelvesFactory()},a.createElement(h.q,{total:t.sectionItems.totalCount,seeAllUri:t.uri,pageId:t.uri,title:t.data.title?.text??"",index:n,id:t.uri},t.sectionItems.items.map(y.x)));var S=n(56607);const k=({spec:e,section:t,index:n})=>a.createElement(u.Nh,{spec:e.shelvesFactory()},a.createElement(S.default,{title:t.data.title?.text??void 0,showAll:!1,index:n}));var _=n(70105),b=n(28791);const C=({spec:e,greeting:t,section:n})=>a.createElement(u.Nh,{spec:e.shortcutsFactory()},a.createElement(_.n,{items:n.sectionItems.items.map(b.l),title:t??void 0})),P=({spec:e,greeting:t,section:n,index:r})=>{switch(n.data?.__typename){case"HomeGenericSectionData":return a.createElement(v,{spec:e,section:(0,p.f)(n,n.data),index:r});case"HomeShortsSectionData":return a.createElement(C,{spec:e,greeting:t,section:(0,p.f)(n,n.data)});case"HomeRecentlyPlayedSectionData":return a.createElement(k,{spec:e,section:(0,p.f)(n,n.data),index:r});case"HomeFeedBaselineSectionData":case"HomeNativeAdsSectionData":case"HomeOnboardingSectionData":case null:case void 0:return null;default:return(0,f._)(n.data),null}},T=({spec:e,greeting:t,container:n})=>a.createElement(a.Fragment,null,n.sections.items.map(((n,r)=>a.createElement(P,{key:`${r}-${n.uri}`,spec:e,greeting:t,section:n,index:r}))));var N=n(33528);const x=({spec:e})=>{(0,m.z)("home");const{data:t,error:n,loading:r}=(0,E.b3)({timeZone:(0,g.L7)()},{cacheTime:g.us,staleTime:g.fS});if(r||null!==n)return a.createElement(s.h,{hasError:null!==n,errorMessage:l.ag.get("error.generic")});const i=t?.home;return"HomeResponsePayload"!==i?.__typename?a.createElement(s.h,{hasError:!0,errorMessage:l.ag.get("error.generic")}):a.createElement("section",{"data-testid":"home-page"},a.createElement("div",{className:N.Z.home},a.createElement("div",{className:c()(N.Z.content,"contentSpacing")},a.createElement(T,{spec:e,greeting:i.greeting?.text??null,container:i.sectionContainer}))))},I=()=>{const{spec:e}=(0,u.fU)(i.createDesktopHomeEventFactory,{data:{identifier:"home",uri:"spotify:home"}});return a.createElement(u.Nh,{spec:e},a.createElement(o.$,null,l.ag.get("page.generic-title")),a.createElement(a.Suspense,{fallback:null},a.createElement(d.S,null)),a.createElement(x,{spec:e}))}},23060:(e,t,n)=>{n.d(t,{S:()=>o});var a=n(67294),r=n(87577),c=n(49207),i=n(28638),l=n(62572);const o=()=>(0,r.W6)(c.Jw)===c.pF.ONHOME?a.createElement(i.w,null,a.createElement(l.M,{onSearch:!1})):null}}]);
//# sourceMappingURL=home-v2.js.map