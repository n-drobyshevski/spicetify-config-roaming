"use strict";(("undefined"!=typeof self?self:global).webpackChunkopen=("undefined"!=typeof self?self:global).webpackChunkopen||[]).push([[5835],{40771:(e,t,a)=>{a.d(t,{Z:()=>o});var n=a(87462),c=a(67294),r=a(67892);const o=({href:e,children:t,...a})=>c.createElement(r.Z,(0,n.Z)({to:e},a),t)},22578:(e,t,a)=>{a.d(t,{$:()=>u});var n=a(67294),c=a(64593),r=a(96206),o=a(69691),l=a(8341),s=a(89952),i=a(51615),m=a(24183);function g(e){return e.includes("Spotify")?e:`Spotify – ${e}`}const u=({children:e,usePlayingItem:t})=>{let a=g(e);(e=>{const{mainLandmarkRef:t}=(0,m.Oh)(),a=(0,i.k6)(),c=a.location?.state?.preventMoveFocus,r=(0,n.useRef)(a.length<2);r.current=a.length<2,(0,n.useEffect)((()=>{const a=t.current;!c&&!r.current&&a&&e&&(a.setAttribute("aria-label",e),a.focus())}),[e,t,c])})(e);const{isPlaying:u}=(0,o.IK)(),d=(0,l.Y)((e=>e?.item));return d&&(u||t)&&((0,s.G_)(d)?a=[d.name,d.artists.map((e=>e.name)).join(r.ag.getSeparator())].join(" • "):(0,s.iw)(d)?a=[d.name,d.show.name].join(" • "):(0,s.k6)(d)&&(a=g(r.ag.get("ad-formats.advertisement")))),n.createElement(c.q,{defaultTitle:"Spotify",defer:!1},n.createElement("title",null,a))}},70369:(e,t,a)=>{a.d(t,{$:()=>n.$});var n=a(22578)},30731:(e,t,a)=>{a.d(t,{u:()=>E});var n=a(67294),c=a(94184),r=a.n(c),o=a(32667),l=a(34011),s=a(6330),i=a(40771);const m="FvfvGU3jvHRskUU9v9_8",g="Q9AlbZn2EGzy3MTWXa8X",u="mxmxS0y8LiwSs5nueKPT",d="GXxVAveNFStY3pBI_NO4",h="eHcXC2s97InYP7rMNT0H",E=n.memo((function(e){const{children:t,message:a,title:c,linkTitle:E,linkTo:v,onClick:p,renderInline:f=!1}=e,{isXSOnly:_,isSMOnly:y}=(0,s.e)(),N=_||y;return n.createElement("section",{className:r()(m,{[g]:f})},t,n.createElement(o.D,{as:"h1",variant:N?"cello":"alto",className:d},c),n.createElement(o.D,{variant:N?"mesto":"ballad",className:h},a),E&&(v||p)&&n.createElement(l.D,{colorSet:"invertedLight",className:u,href:v,onClick:p,component:i.Z},E))}))},59504:(e,t,a)=>{a.d(t,{k:()=>N});var n=a(67294),c=a(31667),r=a(47778),o=a(32667),l=a(67892),s=a(40169),i=a(43315),m=a(9339);const g="wedRUk4eiBo9n9vqXLhU",u="HYVIJaYYiCTgSCHie70L",d="InXSbaoh8emJn09fWs3U",h="SPbe_Q1wtiZQCmo0QKUy",E="TRp4tgG7_cymGIXDevIP",v="tC1Y_nwyyly7cpIGqF5K",p="gY_xUHOSpAn6TPdU23t7",f="l93AfoV_qHnMQSQBB5GK",_="MTTf1Lotynwu3QKhr9uY",y="EkGb0ZzhswreSvpZoioY",N=n.memo((function(e){const{entity:t,isVirtual:a,shouldCombineRecs:N}=e,{venue:{name:b,location:{name:L}}}=t,S=t.artists[0],D=(0,m.ij)(t),C=new Date(t.date.isoString),k=a?c.F:r.n;return n.createElement(l.r,{to:`/concert/${t.id}`,className:g},S.imageUri?n.createElement(s.Z,null,n.createElement("div",{"data-testid":"image-container",className:y,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${S.imageUri})`}})):null,n.createElement("time",{className:u,dateTime:t.date.isoString},n.createElement(o.D,{as:"h5",variant:"minuetBold",className:d},`${(0,m.lJ)(C)} ${C.getDate()}`)),n.createElement("div",{className:h,dir:"auto"},n.createElement(o.D,{as:"h2",className:_,variant:"minuetBold"},(0,i.FO)(C)," • ",(0,m.b8)(C)),n.createElement(o.D,{as:"h2",variant:"cello",weight:"bold",className:E},D),n.createElement("div",{className:v},N?n.createElement(k,{className:p,"aria-label":a?"Virtual Event":"In-Person Event",iconSize:16}):null,n.createElement(o.D,{as:"h2",className:f,variant:"mesto","data-testid":"location-name"},a?b:`${b}, ${L}`))))}))},36198:(e,t,a)=>{a.d(t,{Z:()=>y});var n=a(67294),c=a(94184),r=a.n(c),o=a(73727),l=a(44295),s=a(39714),i=a(32667),m=a(21317),g=a(96206),u=a(87961),d=a(6024),h=a(29854);const E={locationContainer:"mVOFnq7zSPRV_LEgGpDs",locationName:"C27SqjLS1_s0rqa7OD7c",clearSuggestions:"hdK8yppl_sXZMSQmtZtV",hide:"r81fr26QaEERPXCPrPVm",changeLocation:"zwc2XkLWpR92crAJXL21",changeLocationDropdown:"eIoX7T2txqK2JqzJ7cli",changeLocationInputLabel:"Uxx05DSAKPDiUaYLo6Ew",changeLocationInput:"gTFbh_EVVEzUrviFjNKF",searchInputSearchIcon:"pyzKam6u5Chz83qdtWo6",changeLocationLabel:"xVCe2YqliS5UBuqjBTDK",icon:"aZ5OJAP9JwXgm4pJq7UH",changeLocationList:"H1g1Ro1PNCH7OgfgaHkN",changeLocationError:"SjJTvKcJyhdrzQP74cfK",changeLocationLink:"KsT9JzIhvL6lWg8uKQf5",changeLocationItem:"VrqtBC4aYTinEAL4iLO7",button:"f0SQFZDLh_a6sga5nqr0",locationLink:"HEKoKqT_pboxiT4uXfxf"},v="location_no_results",p="location_fetch_error",f={[v]:()=>g.ag.get("concert.error.no_locations_found_subtitle"),[p]:()=>g.ag.get("concert.error.general_error_title")},_=e=>{const t=n.createRef(),a=n.createRef(),[c,_]=(0,n.useState)(""),[y,N]=(0,n.useState)(-1),[b,L]=(0,n.useState)([]),[S,D]=(0,n.useState)(null),{placeholder:C,onSelectLocation:k,hideLocationSelector:w}=e,I=(0,h.D)((()=>{d.LH.fetchLocationQuery(u.b.getInstance(),c).then((e=>{const{body:{results:t=[]}={}}=e;L(t),t.length?D(null):D(v)}),(()=>{L([]),D(p)}))}))(250),T=e=>{_(e),N(-1),L([]),D(null),e&&e.length>1&&I(e)};let U=r()(E.clearSuggestions,E.hide);return(b&&b.length||S===v)&&(U=E.clearSuggestions),n.createElement("div",{className:E.changeLocation,"data-interaction-context":"location-selector"},n.createElement("div",{className:E.changeLocationDropdown,onKeyDown:e=>{const n=38,c=40,r=27,o=9,l=e.which;let s=y;switch([r,c,n,o].indexOf(l)>-1&&e.preventDefault(),l){default:return;case r:return void k(null);case n:s=Math.max(y-1,-1);break;case c:case o:s=Math.min(y+1,b.length-1);break;case 13:k(b[y])}if(s<0)t.current.focus();else{const e=a.current.childNodes[s];e&&e.focus()}N(s)},role:"searchbox",onBlur:e=>{e.relatedTarget||(T(""),w())}},n.createElement("div",{className:E.changeLocationForm},n.createElement("div",{className:E.changeLocationLabel},n.createElement(l.j,{className:E.icon,iconSize:16}),n.createElement("input",{className:E.changeLocationInput,type:"search",id:"change-location-input",placeholder:C,value:c,onChange:e=>T(e.target.value),ref:t,"aria-label":C,autoFocus:!0}),n.createElement("button",{className:U,"aria-label":g.ag.get("search.a11y.clear-input"),onClick:()=>T("")},n.createElement(s.k,{iconSize:16})))),n.createElement("ol",{className:E.changeLocationList,ref:a},S&&n.createElement(i.D,{as:"li",variant:"ballad",className:E.changeLocationError},n.createElement(m.l,{iconSize:16}),f[S]()),b&&b.length&&b.map(((e,t)=>n.createElement(i.D,{as:"li",variant:"ballad",weight:"book",key:t,className:E.changeLocationItem,tabIndex:t+1},n.createElement(o.rU,{to:"#",className:E.changeLocationLink,onClick:()=>k(e),role:"button"},e.location))))||null)))},y=e=>{const{handleLocationChange:t,locationStr:a}=e,[c,r]=(0,n.useState)(!1);return n.createElement("div",{className:E.locationContainer},n.createElement(i.D,{as:"h1",variant:"alto"},g.ag.get("concerts_shows_in")),n.createElement("span",null,c&&n.createElement(_,{placeholder:g.ag.get("concerts.input.search_placeholder"),onSelectLocation:e=>{t(e),r(!1)},hideLocationSelector:()=>r(!1)}),!c&&n.createElement(i.D,{as:"h2",variant:"alto",className:E.locationName,dir:"auto",onClick:r,role:"button"},a)))}},50543:(e,t,a)=>{a.r(t),a.d(t,{default:()=>ge});var n=a(67294),c=a(86706),r=a(73012),o=a(32667),l=a(87577),s=a(96206),i=a(6581),m=a(95888),g=a(70369),u=a(30731),d=a(60289),h=a(59482),E=a(72907),v=a(6158),p=a(19480),f=a(37081),_=a(49207),y=a(29255),N=a(42922),b=a(59504),L=a(86025),S=a(40169),D=a(9339);const C="F7MwywVorrNKOgt7CEGy",k="r4aK7GGCTY1vrPuSoGy6",w="RX2kdQC6Fgc9h04mEgXx",I="JpGXFGtOfmKH5mKCOMQw",T="pN88b8jrYtBCrYGu35Al",U="amTa2euxioUd0vU2jMf5",K="Ko142eYEnV1xtSP5Vjk3",G=n.memo((function(e){const{entity:t,onClick:a,openingDate:c,closingDate:r,concertsCount:l}=e,i=t.artists[0],m=(0,D.ij)(t);return n.createElement(L.oM,{onClick:a,className:C,component:"div"},i.imageUri?n.createElement(S.Z,null,n.createElement("div",{"data-testid":"image-container",className:K,style:{backgroundImage:`linear-gradient(180deg, rgba(18, 18, 18, 0) 0%, rgba(6, 6, 6, 0.6) 60%, rgba(0, 0, 0, 0.7) 100%), url(${i.imageUri})`}})):null,n.createElement("time",{className:k,dateTime:t.date.isoString},n.createElement(o.D,{as:"h5",variant:"minuetBold",className:w},c.getMonth()===r.getMonth()?`${(0,D.lJ)(c)} ${c.getDate()}-${r.getDate()}`:`${(0,D.lJ)(c)} ${c.getDate()} - ${(0,D.lJ)(r)} ${r.getDate()}`)),n.createElement("div",{className:I,dir:"auto"},n.createElement(o.D,{as:"h2",variant:"cello",weight:"bold",className:T},m),n.createElement("div",{className:U},n.createElement(o.D,{as:"h2",variant:"mesto","data-testid":"concerts-count"},`${s.ag.get("concerts.count",l)}`))))}));var P=a(36198),F=a(10586),M=a(39714),O=a(92877),R=a(84465),$=a(67892);const x="_HSbKteV9dfeHwGxcNg_",X="aWBUVnORYXxsyYkhLwA9",J="my32elFymTSFRhPKDaLo",Z="YAGZg56IvTunyhaur40H",z="vmevmDz8WM9VvMmgoaWe",Y="ac36K8GtTBXhfFPRfGTo",V="hz2yJw4parzL0WK0rMng",q="p_yAxEy29Xzm0fTvIg8T",A="wC2qUh2SJBX1UEe9aQtV",j="sUzcAnZ86exG3LZrvpf2",B="Ou1Z3dcAWteEuTiYJlkB",H="EtOrJwt_4yhkrHWbxXy4",Q="M680KWddHfIaTZCTyULM",W="NjDfI7zPhvTXV8SjKcqq",ee="OEdqJZzUG2K9iXIn9RtC",te=e=>{const{concert:t}=e,{isoString:a}=t.date,c=new Date(Date.parse(a)),r="ONLINE"===t.category,l=t.venue.name,s=t.venue.location.name,i=r?l:`${l}, ${s}`;return n.createElement($.r,{key:t.id,to:`/concert/${t.id}`,className:q},n.createElement("time",{className:A,dateTime:a},n.createElement(o.D,{as:"h5",variant:"minuetBold",className:j},(0,D.lJ)(c)),n.createElement(o.D,{as:"h1",variant:"cello",className:B},c.getDate())),n.createElement("div",{className:H},n.createElement(o.D,{as:"div",variant:"violaBold",className:Q,"data-testid":"event-title"},(0,D.Yl)(t)),n.createElement(o.D,{as:"div",variant:"viola",className:W},`${(0,D.cd)(c)} • ${(0,D.b8)(c)}`),n.createElement(o.D,{as:"div",variant:"viola",className:ee,"data-testid":"event-venue"},i)))},ae=n.memo((function({concerts:e,onClose:t,open:a,location:c}){if(0===e.length)return null;const r=e[0].artists[0];return n.createElement(R.Z,{contentLabel:s.ag.get("live_events.label"),isOpen:a,className:x,onRequestClose:t},n.createElement("section",{className:X},n.createElement("div",{className:J},n.createElement(ne,{"aria-label":s.ag.get("close"),iconOnly:M.k,buttonSize:"sm",onClick:t})),n.createElement("div",{className:Z},n.createElement(O.E,{height:"48",width:"48",className:z,src:r.imageUri}),n.createElement("div",{className:Y},n.createElement(o.D,{as:"h3",variant:"cello",className:V,"data-testid":"event-venue"},r.name),n.createElement(o.D,{as:"h3",variant:"mesto","data-testid":"event-venue"},`${s.ag.get("concerts.count_near_location",e.length,c)}`))),e.map((e=>n.createElement(te,{key:e.uri,concert:e})))))}));var ne=(0,F.ZP)(L.oM).withConfig({displayName:"GroupedConcerts___StyledButtonTertiary",componentId:"sc-1c9dnr3-0"})({color:"#FFFFFF",backgroundColor:"#000000",cursor:"pointer"});const ce="wIVpEJ_zYWGyFUrvX08g",re="hSZRbryPAMeTRaXuUSlM",oe="NrsEgNsURvcsSkUnT8yN",le={get Online(){return s.ag.get("concerts_upcoming_virtual_events")},get Recommended(){return s.ag.get("concerts_recommended_for_you")},get Popular(){return s.ag.get("concerts_popular_near_you")},get Playlists(){return s.ag.get("playlists")}},se=r.jN0,ie=e=>{const{collection:t,concertMetadata:a,handleLocationChange:c,shouldCombineRecs:r,setShowGroupedConcerts:l,setGroupedConcerts:i}=e,m=t?.items||[],g=t?.isFetching,d=a.userLocation.name||s.ag.get("concerts.default_location"),h=e=>{if(!e.concerts||!e.concerts.length)return null;const t=e.concerts[0];return e.concerts.length>1?n.createElement(G,{key:t.uri,entity:t,openingDate:new Date(e.openingDate),closingDate:new Date(e.closingDate),concertsCount:e.concerts.length,onClick:()=>{i(e.concerts),l(!0)}}):n.createElement(b.k,{key:t.uri,entity:t,isVirtual:r?"ONLINE"===t.category:"online"===e.source,shouldCombineRecs:r})};if(g)return n.createElement(v.h,{hasError:!1,errorMessage:s.ag.get("error.request-browse-concerts-failure")});return n.createElement("div",{className:oe},n.createElement("div",{className:ce,"data-testid":"location-selector"},n.createElement(P.Z,{handleLocationChange:c,locationStr:d})),(()=>{if(!m.length)return n.createElement(u.u,{title:s.ag.get("concerts.error.no_concerts_found_title"),message:s.ag.get("concerts.error.no_concerts_found_message",d),renderInline:!0});const e=m.reduce(((e,t)=>("recommendation"===t.source?e.Recommended.push(t):"popular"===t.source?e.Popular.push(t):"online"===t.source&&e.Online.push(t),e)),{Online:[],Recommended:[],Popular:[]});return Object.keys(e).map(((t,a)=>{const c=e[t];return 0===c.length?null:n.createElement("div",{key:t,className:ce},n.createElement(N.ZP,{value:"headered-grid",index:a},n.createElement(p.P,{total:c.length,title:le[t],showAll:!0},c.map(h))))}))})(),n.createElement(o.D,{variant:"finale",semanticColor:"textSubdued"},s.ag.get("live_events.disclaimer")))},me=n.memo((function(){const e=(0,c.I0)(),t=(0,l.W6)(_.AW),{isAnonymous:a}=(0,c.v9)(y.Gg),r=(0,c.v9)((e=>e.concerts.collection)),o=(0,c.v9)((e=>e.concerts)),u=o.userLocation.name||s.ag.get("concerts.default_location"),v=o.userLocation.geonameId;(0,n.useEffect)((()=>{e((0,i.AJ)(v??null,a))}),[e,a,v]);const p=(0,f.Y)(se),[N,b]=(0,n.useState)(!1),[L,S]=(0,n.useState)([]);return n.createElement("section",{className:re},n.createElement(g.$,null,`${s.ag.get("concerts_shows_in")} ${u}`),n.createElement(d.gF,{size:d.fR.SMALL,backgroundColor:se},n.createElement(d.sP,null,n.createElement(d.xd,null,s.ag.get("live_events.label"))),n.createElement(h.W,null,n.createElement(E.i,{text:s.ag.get("live_events.label")}))),n.createElement(m.I,{backgroundColor:p}),n.createElement(ie,{collection:r,concertMetadata:o,handleLocationChange:t=>{t&&t.geonameId&&(e((0,i.kz)(t)),e((0,i.AJ)(t.geonameId,a)))},shouldCombineRecs:t,setShowGroupedConcerts:b,setGroupedConcerts:S}),n.createElement(ae,{location:u,concerts:L,onClose:()=>b(!1),open:N}))})),ge=e=>n.createElement(n.Suspense,{fallback:null},n.createElement(me,e))},9339:(e,t,a)=>{a.d(t,{Ms:()=>c,NL:()=>l,O1:()=>i,Yl:()=>u,b8:()=>r,cd:()=>s,ij:()=>d,lJ:()=>o});var n=a(96206);const c=e=>n.ag.formatDate(e,{weekday:"short",month:"short",day:"numeric"}),r=e=>n.ag.formatDate(e,{hour:"numeric",minute:"numeric"}),o=e=>n.ag.formatDate(e,{month:"short"}).toUpperCase(),l=e=>n.ag.formatDate(e,{month:"short",day:"numeric"}).toUpperCase(),s=e=>n.ag.formatDate(e,{weekday:"short"}),i=e=>e<new Date,m={row:{1:e=>n.ag.get("concert.header.entity_title_1",...e),2:e=>n.ag.get("concert.header.entity_title_2",...e),3:e=>n.ag.get("concert.header.entity_title_3",...e),4:e=>n.ag.get("concert.header.entity_title_4",...e),more:e=>n.ag.get("concert.header.entity_title_more",...e)},entity:{1:e=>n.ag.get("concert.header.upcoming_concert_title_1",...e),2:e=>n.ag.get("concert.header.upcoming_concert_title_2",...e),3:e=>n.ag.get("concert.header.upcoming_concert_title_3",...e),4:e=>n.ag.get("concert.header.upcoming_concert_title_4",...e),more:e=>n.ag.get("concert.header.upcoming_concert_title_more",...e)}},g=(e,t)=>{const a=m[t],n=(e=>{try{return!e.title||!e.festival&&e.artists?.length?{artists:e.artists.map((e=>e.name||e.profile.name))}:{title:e.title}}catch(e){return null}})(e);if(n){if(n.title)return n.title;if(n.artists)return n.artists.length>4?a.more(n.artists):a[n.artists.length](n.artists)}return""},u=e=>g(e,"row"),d=e=>g(e,"entity")}}]);
//# sourceMappingURL=xpui-routes-collection-concerts.js.map